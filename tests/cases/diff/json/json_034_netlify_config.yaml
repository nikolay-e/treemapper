name: json_034_netlify_config
initial:
  netlify.json: |
    {
      "build": {"command": "npm run build", "publish": "dist"},
      "functions": {"directory": "functions"}
    }
  functions/hello.js: |
    exports.handler = async (event) => {
      return { statusCode: 200, body: 'Hello!' };
    };
changed:
  netlify.json: |
    {
      "build": {"command": "npm run build", "publish": "build"},
      "functions": {"directory": "netlify/functions"},
      "redirects": [{"from": "/api/*", "to": "/.netlify/functions/:splat"}]
    }
assertions:
  must_include:
    - exports.handler
options:
  commit_message: update functions path
