name: json_022_package_json_main_entry
initial:
  package.json: |
    {
      "name": "mylib",
      "main": "dist/index.js"
    }
  src/index.ts: |
    export function greet(name: string): string {
      return `Hello, ${name}!`;
    }
changed:
  package.json: |
    {
      "name": "mylib",
      "main": "dist/index.cjs",
      "module": "dist/index.mjs",
      "types": "dist/index.d.ts"
    }
assertions:
  must_include:
    - export function greet
options:
  commit_message: add esm support
