name: fragments_003_class_decorator_included
initial:
  decorated_class.py: |
    from dataclasses import dataclass
    from typing import Optional

    def standalone_function_before():
        return "GARBAGE_FRAG_standaloneB003"

    class UnrelatedClassBefore:
        UNRELATED_MARKER = "GARBAGE_FRAG_unrelatedB003"

        def unrelated_method_before(self):
            return "GARBAGE_FRAG_methodB003"

    @dataclass
    class MyClass:
        value: int

    def standalone_function_after():
        return "GARBAGE_FRAG_standaloneA003"

    class UnrelatedClassAfter:
        UNRELATED_MARKER = "GARBAGE_FRAG_unrelatedA003"

        def unrelated_method_after(self):
            return "GARBAGE_FRAG_methodA003"

        @staticmethod
        def static_garbage():
            return "GARBAGE_FRAG_static003"
  models_garbage_003.py: |
    from dataclasses import dataclass

    @dataclass
    class GarbageModel:
        garbage_field: str = "GARBAGE_FRAG_model003"

    class AnotherGarbageClass:
        CONSTANT = "GARBAGE_FRAG_anotherclass003"
changed:
  decorated_class.py: |
    from dataclasses import dataclass
    from typing import Optional

    def standalone_function_before():
        return "GARBAGE_FRAG_standaloneB003"

    class UnrelatedClassBefore:
        UNRELATED_MARKER = "GARBAGE_FRAG_unrelatedB003"

        def unrelated_method_before(self):
            return "GARBAGE_FRAG_methodB003"

    @dataclass
    class MyClass:
        value: int
        name: str

    def standalone_function_after():
        return "GARBAGE_FRAG_standaloneA003"

    class UnrelatedClassAfter:
        UNRELATED_MARKER = "GARBAGE_FRAG_unrelatedA003"

        def unrelated_method_after(self):
            return "GARBAGE_FRAG_methodA003"

        @staticmethod
        def static_garbage():
            return "GARBAGE_FRAG_static003"
assertions:
  must_include:
    - '@dataclass'
    - MyClass
    - decorated_class.py
  must_not_include:
    - GARBAGE_FRAG_standaloneB003
    - GARBAGE_FRAG_unrelatedB003
    - GARBAGE_FRAG_methodB003
    - GARBAGE_FRAG_standaloneA003
    - GARBAGE_FRAG_unrelatedA003
    - GARBAGE_FRAG_methodA003
    - GARBAGE_FRAG_static003
    - GARBAGE_FRAG_model003
    - GARBAGE_FRAG_anotherclass003
    - models_garbage_003.py
    - standalone_function_before
    - standalone_function_after
    - UnrelatedClassBefore
    - UnrelatedClassAfter
    - GarbageModel
options:
  commit_message: Add field
