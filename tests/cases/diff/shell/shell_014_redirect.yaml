name: shell_014_redirect
initial:
  config.sh: |
    #!/bin/bash
    export LOG_FILE="/var/log/app.log"
  runner.sh: |
    #!/bin/bash
    echo "Runner"
  garbage.sh: |
    #!/bin/bash
    SHELLTEST_REDIRECT_015="unused_redirect_path"
    shelltest_unused_abc002="not_used"
changed:
  runner.sh: |
    #!/bin/bash
    source ./config.sh

    exec 2>&1 | tee -a "$LOG_FILE"

    echo "Starting application..."
    ./app 2>&1 | tee -a "$LOG_FILE"

    {
        echo "=== System Info ==="
        date
        hostname
        uptime
    } >> "$LOG_FILE"

    ./script.sh > /dev/null 2>&1
assertions:
  must_include:
  - runner.sh
  - LOG_FILE
  must_not_include:
  - SHELLTEST_REDIRECT_015
  - shelltest_unused_abc002
