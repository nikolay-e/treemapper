name: shell_020_shebang
initial:
  script.sh: |
    echo "No shebang"
  garbage.sh: |
    #!/bin/bash
    SHELLTEST_SHEBANG_021="unused_value_99999"
    unused_marker_12345="not_used"
changed:
  script.sh: |
    #!/usr/bin/env bash

    if [[ "${BASH_VERSINFO[0]}" -lt 4 ]]; then
        echo "Bash 4.0+ required"
        exit 1
    fi

    declare -A map
    map[key]="value"

    echo "Running with: $BASH_VERSION"
    echo "Map value: ${map[key]}"
assertions:
  must_include:
  - script.sh
  - BASH_VERSION
  must_not_include:
  - SHELLTEST_SHEBANG_021
  - unused_marker_12345
