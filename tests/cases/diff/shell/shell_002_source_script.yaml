name: shell_002_source_script
initial:
  config.sh: |
    #!/bin/bash

    export DB_HOST="localhost"
    export DB_PORT="5432"
    export DB_NAME="myapp"
    export LOG_LEVEL="info"

    get_connection_string() {
        echo "postgres://${DB_HOST}:${DB_PORT}/${DB_NAME}"
    }
  deploy.sh: |
    #!/bin/bash
    echo "Deploying..."
  garbage.sh: |
    #!/bin/bash
    shelltest_gunused_003() { echo "never called"; }
    unused_marker_12345="not_used"
changed:
  deploy.sh: |
    #!/bin/bash
    source ./config.sh

    echo "Connecting to database..."
    CONNECTION=$(get_connection_string)
    echo "Using connection: $CONNECTION"
    echo "Log level: $LOG_LEVEL"
assertions:
  must_include:
  - deploy.sh
  - get_connection_string
  must_not_include:
  - shelltest_gunused_003
  - unused_marker_12345
