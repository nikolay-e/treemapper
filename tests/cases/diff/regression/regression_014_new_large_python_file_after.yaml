src/repository.py: |
  from typing import List, Optional

  class UserRepository:
      def __init__(self, db_connection):
          self.db = db_connection

      def find_by_id(self, user_id: int) -> Optional[dict]:
          return self.db.query("SELECT * FROM users WHERE id = %s", user_id)

      def find_all(self) -> List[dict]:
          return self.db.query("SELECT * FROM users")

      def create(self, user_data: dict) -> int:
          return self.db.insert("users", user_data)

      def update(self, user_id: int, user_data: dict) -> bool:
          return self.db.update("users", user_id, user_data)

      def delete(self, user_id: int) -> bool:
          return self.db.delete("users", user_id)

src/models.py: |
  from dataclasses import dataclass
  from typing import Optional
  from datetime import datetime

  @dataclass
  class User:
      id: int
      name: str
      email: str
      created_at: datetime
      updated_at: Optional[datetime] = None

  @dataclass
  class UserProfile:
      user_id: int
      bio: Optional[str] = None
      avatar_url: Optional[str] = None

src/validators.py: |
  import re
  from typing import List

  def validate_email(email: str) -> bool:
      pattern = r'^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$'
      return bool(re.match(pattern, email))

  def validate_username(name: str) -> bool:
      return len(name) >= 3 and len(name) <= 50

  def validate_password(password: str) -> List[str]:
      errors = []
      if len(password) < 8:
          errors.append("Password must be at least 8 characters")
      if not any(c.isupper() for c in password):
          errors.append("Password must contain uppercase letter")
      return errors

src/user_service.py: |
  from typing import List, Optional
  from src.repository import UserRepository
  from src.models import User, UserProfile
  from src.validators import validate_email, validate_username, validate_password

  class UserService:
      def __init__(self, repository: UserRepository):
          self.repository = repository

      def register_user(self, name: str, email: str, password: str) -> User:
          if not validate_email(email):
              raise ValueError("Invalid email address")
          if not validate_username(name):
              raise ValueError("Invalid username")
          password_errors = validate_password(password)
          if password_errors:
              raise ValueError(", ".join(password_errors))
          user_data = {"name": name, "email": email, "password": password}
          user_id = self.repository.create(user_data)
          return User(id=user_id, name=name, email=email, created_at=None)

      def get_user(self, user_id: int) -> Optional[User]:
          data = self.repository.find_by_id(user_id)
          if data is None:
              return None
          return User(**data)

      def list_users(self) -> List[User]:
          rows = self.repository.find_all()
          return [User(**row) for row in rows]

      def update_user(self, user_id: int, name: str, email: str) -> bool:
          if not validate_email(email):
              raise ValueError("Invalid email address")
          if not validate_username(name):
              raise ValueError("Invalid username")
          return self.repository.update(user_id, {"name": name, "email": email})

      def delete_user(self, user_id: int) -> bool:
          return self.repository.delete(user_id)

      def get_user_profile(self, user_id: int) -> Optional[UserProfile]:
          data = self.repository.find_by_id(user_id)
          if data is None:
              return None
          return UserProfile(user_id=user_id, bio=data.get("bio"), avatar_url=data.get("avatar_url"))

scripts/GARBAGE_REG014_seed_data.py: |
  GARBAGE_REG014_SEED_MARKER = "seed_data_garbage"
  def GARBAGE_REG014_populate_database():
      return "GARBAGE_REG014_POPULATE_RESULT"

scripts/GARBAGE_REG014_migrate.py: |
  GARBAGE_REG014_MIGRATE_MARKER = "migrate_garbage"
  def GARBAGE_REG014_run_migrations():
      return "GARBAGE_REG014_MIGRATION_RESULT"

utils/GARBAGE_REG014_helpers.py: |
  GARBAGE_REG014_HELPER_MARKER = "helper_garbage"
  def GARBAGE_REG014_format_output():
      return "GARBAGE_REG014_FORMAT_RESULT"
