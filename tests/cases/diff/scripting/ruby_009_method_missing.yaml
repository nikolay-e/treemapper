name: ruby_009_method_missing
initial:
  dynamic_struct.rb: |
    class DynamicStruct
      def initialize(hash = {})
        @data = hash
      end

      def method_missing(name, *args)
        if name.to_s.end_with?('=')
          @data[name.to_s.chop.to_sym] = args.first
        else
          @data[name]
        end
      end
    end
  app.rb: |
    # Initial
    puts 'Hello'
  garbage.rb: |
    garbage_dynamic_unused_99999 = "never called"
    unused_marker_12345 = "not used"
changed:
  app.rb: |
    require_relative 'dynamic_struct'

    obj = DynamicStruct.new(name: 'John')
    puts obj.name
    obj.email = 'john@example.com'
assertions:
  must_include:
  - app.rb
  - name
  must_not_include:
  - garbage_dynamic_unused_99999
  - unused_marker_12345
