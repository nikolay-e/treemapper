name: ruby_015_rails_controller
initial:
  user.rb: |
    class User
      attr_accessor :id, :name, :email

      def self.find(id)
        new(id: id, name: "User")
      end

      def initialize(id: nil, name: nil, email: nil)
        @id = id
        @name = name
        @email = email
      end

      def save
        true
      end
    end
  users_controller.rb: |
    # Initial
    class UsersController
    end
  garbage.rb: |
    garbage_find_unused_99999 = "never called"
    unused_marker_12345 = "not used"
changed:
  users_controller.rb: |
    require_relative 'user'

    class UsersController
      def create
        @user = User.new(user_params)
        @user.save
      end

      def show
        @user = User.find(params[:id])
      end

      private

      def user_params
        { name: 'John', email: 'john@example.com' }
      end

      def params
        { id: 1 }
      end
    end
assertions:
  must_include:
  - users_controller.rb
  - find
  must_not_include:
  - garbage_find_unused_99999
  - unused_marker_12345
