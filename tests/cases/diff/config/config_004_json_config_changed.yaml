name: config_004_json_config_changed
initial:
  settings.json: |
    {
      "maxConnections": 100,
      "timeout": 30
    }
  server.py: |
    import json

    def load_settings():
        with open("settings.json") as f:
            return json.load(f)

    def start_server():
        settings = load_settings()
        max_conn = settings["maxConnections"]
        return {"max_connections": max_conn}
changed:
  settings.json: |
    {
      "maxConnections": 200,
      "timeout": 30
    }
assertions:
  must_include:
  - settings.json
options:
  commit_message: Increase max connections
