name: react_070_redux_action
initial:
  userSlice.ts: |
    import { createSlice, PayloadAction } from '@reduxjs/toolkit';

    interface User {
        id: string;
        name: string;
    }

    interface UserState {
        users: User[];
        loading: boolean;
    }

    const initialState: UserState = { users: [], loading: false };

    export const userSlice = createSlice({
        name: 'users',
        initialState,
        reducers: {
            addUser: (state, action: PayloadAction<User>) => {
                state.users.push(action.payload);
            },
            removeUser: (state, action: PayloadAction<string>) => {
                state.users = state.users.filter(u => u.id !== action.payload);
            },
        },
    });

    export const { addUser, removeUser } = userSlice.actions;
  UserForm.tsx: |
    console.log('initial');
changed:
  UserForm.tsx: |
    import { useDispatch } from 'react-redux';
    import { addUser } from './userSlice';

    export function UserForm() {
        const dispatch = useDispatch();

        const handleAdd = () => {
            dispatch(addUser({ id: Date.now().toString(), name: 'New User' }));
        };

        return <button onClick={handleAdd}>Add User</button>;
    }
assertions:
  must_include:
  - addUser
  - UserForm.tsx
  must_not_include:
  - js_garbage_marker_001
options:
  commit_message: Add Redux action dispatch
