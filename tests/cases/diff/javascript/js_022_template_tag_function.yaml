name: js_022_template_tag_function
initial:
  tags.ts: |
    export function sql(strings: TemplateStringsArray, ...values: any[]) {
        let result = '';
        strings.forEach((str, i) => {
            result += str + (values[i] !== undefined ? `$${i + 1}` : '');
        });
        return { text: result, values };
    }
  query.ts: |
    console.log('initial');
changed:
  query.ts: |
    import { sql } from './tags';

    function buildQuery(userId: string) {
        const query = sql`SELECT * FROM users WHERE id = ${userId}`;
        return query;
    }

    console.log(buildQuery('123'));
assertions:
  must_include:
  - sql
  - query.ts
  must_not_include:
  - js_garbage_marker_001
options:
  commit_message: Add tagged template usage
