name: angular_079_http_client
initial:
  api.config.ts: |
    export const API_BASE = '/api';

    export interface ApiResponse<T> {
        data: T;
        status: number;
    }
  data.service.ts: |
    console.log('initial');
changed:
  data.service.ts: |
    import { Injectable } from '@angular/core';
    import { HttpClient } from '@angular/common/http';
    import { Observable } from 'rxjs';
    import { map } from 'rxjs/operators';
    import { API_BASE, ApiResponse } from './api.config';

    @Injectable({ providedIn: 'root' })
    export class DataService {
        constructor(private http: HttpClient) {}

        getData<T>(endpoint: string): Observable<T> {
            return this.http.get<ApiResponse<T>>(`${API_BASE}${endpoint}`)
                .pipe(map(response => response.data));
        }
    }
assertions:
  must_include:
  - API_BASE
  - data.service.ts
  must_not_include:
  - js_garbage_marker_001
options:
  commit_message: Add HttpClient usage
