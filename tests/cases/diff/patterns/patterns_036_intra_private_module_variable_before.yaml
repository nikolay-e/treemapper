registry.py: |
  _handlers = {}
  _initialized = False

  def register(name, handler):
      global _initialized
      if not _initialized:
          _initialize()
      _handlers[name] = handler

  def get_handler(name):
      return _handlers.get(name)

  def _initialize():
      global _initialized
      _handlers.clear()
      _initialized = True

  def list_handlers():
      return list(_handlers.keys())
