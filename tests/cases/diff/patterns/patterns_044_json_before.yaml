src/serializers.py: |
  import json
  from dataclasses import dataclass, asdict
  from typing import Any

  @dataclass
  class User:
      id: int
      name: str
      email: str
      active: bool = True

  @dataclass
  class Order:
      id: int
      user_id: int
      items: list
      total: float

  class JsonSerializer:
      @staticmethod
      def serialize_user(user: User) -> str:
          data = asdict(user)
          data["type"] = "user"
          return json.dumps(data, indent=2, sort_keys=True)

      @staticmethod
      def serialize_order(order: Order) -> str:
          data = asdict(order)
          data["type"] = "order"
          data["item_count"] = len(order.items)
          return json.dumps(data, indent=2, sort_keys=True)

      @staticmethod
      def serialize_batch(items: list[Any]) -> str:
          result = []
          for item in items:
              if isinstance(item, User):
                  result.append({"type": "user", **asdict(item)})
              elif isinstance(item, Order):
                  result.append({"type": "order", **asdict(item)})
          return json.dumps({"batch": result, "count": len(result)}, indent=2)
tests/test_serializers.py: |
  from src.serializers import User, JsonSerializer

  def test_serialize_user():
      user = User(id=1, name="Test", email="test@example.com")
      result = JsonSerializer.serialize_user(user)
      assert "test@example.com" in result
