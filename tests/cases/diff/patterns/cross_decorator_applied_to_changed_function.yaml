name: cross_decorator_applied_to_changed_function
initial:
  decorators/auth.py: |
    def login_required(func):
        def wrapper(*args, **kwargs):
            if not is_authenticated():
                raise ValueError("Not authenticated")
            return func(*args, **kwargs)
        return wrapper

    def is_authenticated():
        return True
  decorators/rate.py: |
    def rate_limit(limit):
        def decorator(func):
            def wrapper(*args, **kwargs):
                return func(*args, **kwargs)
            return wrapper
        return decorator
  api.py: |
    from decorators.auth import login_required
    from decorators.rate import rate_limit

    @login_required
    @rate_limit(100)
    def api_endpoint():
        return {"status": "ok"}
changed:
  api.py: |
    from decorators.auth import login_required
    from decorators.rate import rate_limit

    @login_required
    @rate_limit(100)
    def api_endpoint():
        data = fetch_data()
        return {"status": "ok", "data": data}

    def fetch_data():
        return [1, 2, 3]
assertions:
  must_include:
  - api.py
