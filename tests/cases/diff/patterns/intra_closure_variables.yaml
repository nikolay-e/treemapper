name: intra_closure_variables
initial:
  counter.py: |
    def make_counter(start=0):
        count = start

        def increment():
            nonlocal count
            count += 1
            return count

        def decrement():
            nonlocal count
            count -= 1
            return count

        def get_value():
            return count

        return increment, decrement, get_value
changed:
  counter.py: |
    def make_counter(start=0, step=1):
        count = start

        def increment():
            nonlocal count
            count += step
            return count

        def decrement():
            nonlocal count
            count -= step
            return count

        def get_value():
            return count

        return increment, decrement, get_value
assertions:
  must_include:
  - make_counter
