name: docs_018_protobuf_message
initial:
  proto/user.proto: |
    syntax = "proto3";

    package user;

    message User {
        int64 id = 1;
        string name = 2;
    }
  src/services/user_service.py: |
    from proto import user_pb2

    def create_user_proto(user):
        proto = user_pb2.User()
        proto.id = user.id
        proto.name = user.name
        return proto
changed:
  proto/user.proto: |
    syntax = "proto3";

    package user;

    import "google/protobuf/timestamp.proto";

    message User {
        int64 id = 1;
        string name = 2;
        string email = 3;
        UserStatus status = 4;
        google.protobuf.Timestamp created_at = 5;
    }

    enum UserStatus {
        USER_STATUS_UNSPECIFIED = 0;
        USER_STATUS_ACTIVE = 1;
        USER_STATUS_INACTIVE = 2;
        USER_STATUS_BANNED = 3;
    }
assertions:
  must_include:
  - user.proto
  must_not_include:
  - garbage_marker_12345
  - unused_marker_67890
