asyncapi.yaml: |
  asyncapi: 2.6.0
  info:
    title: Order Events
    version: 1.0.0
  channels:
    orders/created:
      publish:
        message:
          payload:
            $ref: '#/components/schemas/OrderCreatedEvent'
    orders/updated:
      publish:
        message:
          payload:
            $ref: '#/components/schemas/OrderUpdatedEvent'
    orders/shipped:
      subscribe:
        message:
          payload:
            $ref: '#/components/schemas/OrderShippedEvent'
    orders/cancelled:
      subscribe:
        message:
          payload:
            $ref: '#/components/schemas/OrderCancelledEvent'
  components:
    schemas:
      OrderCreatedEvent:
        type: object
        required:
          - orderId
          - userId
          - timestamp
        properties:
          orderId:
            type: string
          userId:
            type: string
          timestamp:
            type: string
            format: date-time
          items:
            type: array
            items:
              $ref: '#/components/schemas/OrderItem'
      OrderUpdatedEvent:
        type: object
        properties:
          orderId:
            type: string
          changes:
            type: object
          updatedAt:
            type: string
            format: date-time
      OrderShippedEvent:
        type: object
        properties:
          orderId:
            type: string
          trackingNumber:
            type: string
          carrier:
            type: string
      OrderCancelledEvent:
        type: object
        properties:
          orderId:
            type: string
          reason:
            type: string
      OrderItem:
        type: object
        properties:
          productId:
            type: string
          quantity:
            type: integer

src/events/order_publisher.py: |
  import json
  from kafka import KafkaProducer

  producer = KafkaProducer(
      bootstrap_servers=['localhost:9092'],
      value_serializer=lambda v: json.dumps(v).encode('utf-8')
  )

  def publish_order_created(order_id: str):
      producer.send('orders/created', {'orderId': order_id})
      producer.flush()

src/events/order_consumer.py: |
  import json
  from kafka import KafkaConsumer

  consumer = KafkaConsumer(
      'orders/created',
      bootstrap_servers=['localhost:9092'],
      value_deserializer=lambda m: json.loads(m.decode('utf-8'))
  )

  def consume_order_events():
      for message in consumer:
          process_order_event(message.value)

garbage_event_router.ts: |
  const GARBAGE_CICD_DOCS_060_ROUTER_MARKER_A = "kafka-router";
  const GARBAGE_CICD_DOCS_060_PARTITION_MARKER_B = 3;

  class GarbageEventRouter {
    static GARBAGE_CICD_DOCS_060_BALANCE_MARKER_C = "round-robin";
    route(): void {}
  }

garbage_event_serializer.ts: |
  const GARBAGE_CICD_DOCS_060_SERIALIZE_MARKER_D = "avro";
  const GARBAGE_CICD_DOCS_060_SCHEMA_MARKER_E = "registry";

  class GarbageEventSerializer {
    static GARBAGE_CICD_DOCS_060_COMPRESS_MARKER_F = true;
    serialize(): void {}
  }
