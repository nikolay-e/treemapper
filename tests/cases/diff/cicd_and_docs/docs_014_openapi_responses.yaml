name: docs_014_openapi_responses
initial:
  openapi.yaml: |
    openapi: 3.0.0
    paths:
      /products/{id}:
        get:
          responses:
            '200':
              description: Product found
              content:
                application/json:
                  schema:
                    type: object
  src/serializers/product.py: |
    def serialize_product(product):
        return {"id": product.id, "name": product.name}
changed:
  openapi.yaml: |
    openapi: 3.0.0
    paths:
      /products/{id}:
        get:
          responses:
            '200':
              description: Product found
              content:
                application/json:
                  schema:
                    $ref: '#/components/schemas/ProductResponse'
            '404':
              description: Product not found
              content:
                application/json:
                  schema:
                    $ref: '#/components/schemas/Error'
            '500':
              description: Internal server error
    components:
      schemas:
        ProductResponse:
          type: object
          properties:
            id:
              type: integer
            name:
              type: string
            price:
              type: number
        Error:
          type: object
          properties:
            code:
              type: string
            message:
              type: string
assertions:
  must_include:
  - openapi.yaml
  must_not_include:
  - garbage_marker_12345
  - unused_marker_67890
