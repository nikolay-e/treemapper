name: cicd_018_gha_environment
initial:
  .github/workflows/deploy.yml: |
    name: Deploy
    jobs:
      deploy:
        runs-on: ubuntu-latest
        steps:
          - run: ./deploy.sh
changed:
  .github/workflows/deploy.yml: |
    name: Deploy
    jobs:
      deploy:
        runs-on: ubuntu-latest
        environment:
          name: production
          url: https://example.com
        steps:
          - uses: actions/checkout@v4
          - run: ./deploy.sh
            env:
              DEPLOY_TOKEN: ${{ secrets.DEPLOY_TOKEN }}
assertions:
  must_include:
  - deploy.yml
  must_not_include:
  - garbage_marker_12345
  - unused_marker_67890
