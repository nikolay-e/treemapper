must_include_files:
  - order_status.sql
must_include_content:
  - |
    ALTER TYPE order_status ADD VALUE IF NOT EXISTS 'processing' AFTER 'pending';
    ALTER TYPE order_status ADD VALUE IF NOT EXISTS 'cancelled' AFTER 'delivered';
    ALTER TYPE order_status ADD VALUE IF NOT EXISTS 'refunded' AFTER 'cancelled';
  - |
    CREATE OR REPLACE FUNCTION is_valid_status_transition(
        old_status order_status,
        new_status order_status
    ) RETURNS BOOLEAN AS $$
must_not_include:
  - GARBAGE_CICD_DOCS_071_ENUM_MARKER_A
  - GARBAGE_CICD_DOCS_071_CAST_MARKER_B
  - GARBAGE_CICD_DOCS_071_VALIDATE_MARKER_C
  - GARBAGE_CICD_DOCS_071_TYPE_MARKER_D
  - GARBAGE_CICD_DOCS_071_DOMAIN_MARKER_E
  - GARBAGE_CICD_DOCS_071_COERCE_MARKER_F
  - GarbageEnumMapper
  - GarbageTypeHandler
  - garbage_enum_mapper.ts
  - garbage_type_handler.ts
