.gitlab-ci.yml: |
  stages:
    - build
    - deploy

  build:
    stage: build
    script:
      - npm ci
      - npm run build

  deploy_prod:
    stage: deploy
    script:
      - ./deploy.sh production
    when: manual
    allow_failure: false

deploy.sh: |
  #!/bin/bash
  set -e
  ENV="${1:-staging}"
  echo "Deploying to $ENV..."
  kubectl apply -f k8s/$ENV/

package.json: |
  {
    "name": "gitlab-when-app",
    "version": "1.0.0",
    "scripts": {
      "build": "parcel build src/index.html"
    }
  }

garbage_job_trigger.ts: |
  const GARBAGE_CICD_DOCS_037_TRIGGER_MARKER_A = "webhook";
  const GARBAGE_CICD_DOCS_037_EVENT_MARKER_B = "push";

  class GarbageJobTrigger {
    static GARBAGE_CICD_DOCS_037_DELAY_MARKER_C = 0;
    trigger(): void {}
  }

garbage_job_condition.ts: |
  const GARBAGE_CICD_DOCS_037_CONDITION_MARKER_D = "success";
  const GARBAGE_CICD_DOCS_037_FALLBACK_MARKER_E = "always";

  class GarbageJobCondition {
    static GARBAGE_CICD_DOCS_037_RETRY_MARKER_F = 2;
    evaluate(): boolean { return true; }
  }
