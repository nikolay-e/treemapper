name: cicd_027_gitlab_rules
initial:
  .gitlab-ci.yml: |
    deploy:
      script:
        - ./deploy.sh
changed:
  .gitlab-ci.yml: |
    deploy:
      script:
        - ./deploy.sh
      rules:
        - if: $CI_COMMIT_BRANCH == "main"
        - if: $CI_COMMIT_TAG
          when: always
        - when: never
assertions:
  must_include:
  - .gitlab-ci.yml
  must_not_include:
  - garbage_marker_12345
  - unused_marker_67890
