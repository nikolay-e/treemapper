sql/queries/order_details.sql: |
  -- Get order details with customer, product, and category info
  -- Includes line total calculation and optional category
  SELECT
      o.id AS order_id,
      o.status,
      o.created_at AS order_date,
      u.name AS customer_name,
      u.email AS customer_email,
      p.name AS product_name,
      p.sku AS product_sku,
      c.name AS category_name,
      oi.quantity,
      oi.price AS unit_price,
      (oi.quantity * oi.price) AS line_total,
      d.code AS discount_code,
      d.percent AS discount_percent
  FROM orders o
  JOIN users u ON o.user_id = u.id
  JOIN order_items oi ON o.id = oi.order_id
  JOIN products p ON oi.product_id = p.id
  LEFT JOIN categories c ON p.category_id = c.id
  LEFT JOIN discounts d ON o.discount_id = d.id
  WHERE o.id = :order_id
  ORDER BY oi.id;

src/models/order_detail.py: |
  from dataclasses import dataclass
  from decimal import Decimal
  from datetime import datetime
  from typing import Optional

  @dataclass
  class OrderDetail:
      order_id: int
      status: str
      order_date: datetime
      customer_name: str
      customer_email: str
      product_name: str
      product_sku: str
      category_name: Optional[str]
      quantity: int
      unit_price: Decimal
      line_total: Decimal
      discount_code: Optional[str] = None
      discount_percent: Optional[int] = None

src/repositories/order_repository.py: |
  from typing import List
  from models.order_detail import OrderDetail

  class OrderRepository:
      def __init__(self, db):
          self.db = db

      def get_order_details(self, order_id: int) -> List[OrderDetail]:
          results = self.db.execute_file(
              'sql/queries/order_details.sql',
              {'order_id': order_id}
          )
          return [OrderDetail(**r) for r in results]

garbage_join_optimizer.ts: |
  const GARBAGE_CICD_DOCS_074_JOIN_MARKER_A = "inner";
  const GARBAGE_CICD_DOCS_074_OUTER_MARKER_B = "left";

  class GarbageJoinOptimizer {
    static GARBAGE_CICD_DOCS_074_HASH_MARKER_C = true;
    optimize(): void {}
  }

garbage_query_planner.ts: |
  const GARBAGE_CICD_DOCS_074_PLAN_MARKER_D = "cost";
  const GARBAGE_CICD_DOCS_074_INDEX_MARKER_E = "scan";

  class GarbageQueryPlanner {
    static GARBAGE_CICD_DOCS_074_CACHE_MARKER_F = false;
    plan(): void {}
  }
