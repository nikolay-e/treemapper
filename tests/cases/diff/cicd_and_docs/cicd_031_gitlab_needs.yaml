name: cicd_031_gitlab_needs
initial:
  .gitlab-ci.yml: |
    stages:
      - build
      - deploy

    build:
      stage: build
      script:
        - npm run build

    deploy:
      stage: deploy
      script:
        - ./deploy.sh
changed:
  .gitlab-ci.yml: |
    stages:
      - build
      - deploy

    build:
      stage: build
      script:
        - npm run build

    deploy:
      stage: deploy
      needs: [build]
      script:
        - ./deploy.sh
assertions:
  must_include:
  - .gitlab-ci.yml
  must_not_include:
  - garbage_marker_12345
  - unused_marker_67890
