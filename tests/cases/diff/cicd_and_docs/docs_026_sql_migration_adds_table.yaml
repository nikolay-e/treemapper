name: docs_026_sql_migration_adds_table
initial:
  migrations/001_create_orders.sql: |
    CREATE TABLE orders (
        id SERIAL PRIMARY KEY,
        user_id INTEGER REFERENCES users(id),
        total DECIMAL(10, 2)
    );
changed:
  migrations/002_create_order_items.sql: |
    CREATE TABLE order_items (
        id SERIAL PRIMARY KEY,
        order_id INTEGER REFERENCES orders(id) ON DELETE CASCADE,
        product_id INTEGER NOT NULL,
        quantity INTEGER NOT NULL,
        price DECIMAL(10, 2) NOT NULL
    );
  src/models/order_item.py: |
    from dataclasses import dataclass
    from decimal import Decimal

    @dataclass
    class OrderItem:
        id: int
        order_id: int
        product_id: int
        quantity: int
        price: Decimal
assertions:
  must_include:
  - 002_create_order_items.sql
  must_not_include:
  - garbage_marker_12345
  - unused_marker_67890
