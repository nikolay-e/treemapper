k8s/base/deployment.yaml: "apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: secure-api\n  namespace: production\n  labels:\n    app: secure-api\n    tier: backend\nspec:\n  replicas: 3\n  selector:\n\
  \    matchLabels:\n      app: secure-api\n  template:\n    metadata:\n      labels:\n        app: secure-api\n        tier: backend\n    spec:\n      containers:\n      - name: api\n        image: registry.example.com/secure-api:v2.1.0\n\
  \        ports:\n        - containerPort: 8080\n          name: http\n        env:\n        - name: TLS_ENABLED\n          value: \"true\"\n        resources:\n          requests:\n            memory:\
  \ \"512Mi\"\n            cpu: \"500m\"\n          limits:\n            memory: \"1Gi\"\n            cpu: \"1000m\"\n"
k8s/base/service.yaml: "apiVersion: v1\nkind: Service\nmetadata:\n  name: secure-api\n  namespace: production\nspec:\n  selector:\n    app: secure-api\n  ports:\n  - name: http\n    port: 80\n    targetPort:\
  \ 8080\n"
k8s/base/certificate.yaml: "apiVersion: cert-manager.io/v1\nkind: Certificate\nmetadata:\n  name: api-tls\n  namespace: production\nspec:\n  secretName: tls-cert\n  issuerRef:\n    name: letsencrypt-prod\n\
  \    kind: ClusterIssuer\n  dnsNames:\n  - api.example.com\n  - api-backup.example.com\n"
k8s/base/ingress.yaml: "apiVersion: networking.k8s.io/v1\nkind: Ingress\nmetadata:\n  name: api-ingress\n  namespace: production\n  annotations:\n    kubernetes.io/ingress.class: nginx\n    cert-manager.io/cluster-issuer:\
  \ letsencrypt-prod\n    nginx.ingress.kubernetes.io/ssl-redirect: \"true\"\n    nginx.ingress.kubernetes.io/force-ssl-redirect: \"true\"\nspec:\n  tls:\n  - hosts:\n    - api.example.com\n    - api-backup.example.com\n\
  \    secretName: tls-cert\n  rules:\n  - host: api.example.com\n    http:\n      paths:\n      - path: /\n        pathType: Prefix\n        backend:\n          service:\n            name: secure-api\n\
  \            port:\n              number: 80\n  - host: api-backup.example.com\n    http:\n      paths:\n      - path: /\n        pathType: Prefix\n        backend:\n          service:\n            name:\
  \ secure-api\n            port:\n              number: 80\n"
k8s/unrelated/vault/vault-injector.yaml: "# GARBAGE_K8S_427_VAULT_INJECTOR\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: GARBAGE_K8S_427_VAULT_AGENT\n  namespace: vault\nspec:\n  replicas:\
  \ 2\n  selector:\n    matchLabels:\n      app: GARBAGE_K8S_427_VAULT_LABEL\n  template:\n    spec:\n      containers:\n      - name: vault-agent\n        image: hashicorp/vault:GARBAGE_K8S_427_VAULT_VERSION\n\
  \        env:\n        - name: VAULT_ADDR\n          value: GARBAGE_K8S_427_VAULT_ADDR\n"
k8s/unrelated/backup/velero-schedule.yaml: "# GARBAGE_K8S_427_VELERO_BACKUP\napiVersion: velero.io/v1\nkind: Schedule\nmetadata:\n  name: GARBAGE_K8S_427_BACKUP_SCHEDULE\n  namespace: velero\nspec:\n  schedule:\
  \ GARBAGE_K8S_427_CRON_EXPR\n  template:\n    includedNamespaces:\n    - GARBAGE_K8S_427_BACKUP_NS\n    storageLocation: GARBAGE_K8S_427_STORAGE_LOC\n"
k8s/unrelated/cost/kubecost.yaml: "# GARBAGE_K8S_427_KUBECOST_CONFIG\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: GARBAGE_K8S_427_KUBECOST_CM\n  namespace: kubecost\ndata:\n  prometheus-url: GARBAGE_K8S_427_PROM_URL\n\
  \  cluster-id: GARBAGE_K8S_427_CLUSTER_ID\n"
Makefile: "deploy:\n\tkubectl apply -f k8s/base/\n"
