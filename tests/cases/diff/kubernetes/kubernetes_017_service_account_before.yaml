k8s/rbac/serviceaccount.yaml: |
  apiVersion: v1
  kind: ServiceAccount
  metadata:
    name: app-service-account
    namespace: production
    labels:
      app: myapp
  automountServiceAccountToken: false
  ---
  apiVersion: rbac.authorization.k8s.io/v1
  kind: Role
  metadata:
    name: app-role
    namespace: production
  rules:
  - apiGroups: [""]
    resources: ["secrets", "configmaps"]
    verbs: ["get", "list", "watch"]
  - apiGroups: [""]
    resources: ["pods"]
    verbs: ["get", "list"]
  ---
  apiVersion: rbac.authorization.k8s.io/v1
  kind: RoleBinding
  metadata:
    name: app-role-binding
    namespace: production
  subjects:
  - kind: ServiceAccount
    name: app-service-account
    namespace: production
  roleRef:
    kind: Role
    name: app-role
    apiGroup: rbac.authorization.k8s.io
k8s/apps/deployment.yaml: |
  apiVersion: apps/v1
  kind: Deployment
  metadata:
    name: myapp
    namespace: production
    labels:
      app: myapp
  spec:
    replicas: 3
    selector:
      matchLabels:
        app: myapp
    template:
      metadata:
        labels:
          app: myapp
      spec:
        containers:
        - name: app
          image: myapp:v1.0.0
          ports:
          - containerPort: 8080
          resources:
            requests:
              memory: "256Mi"
              cpu: "250m"
k8s/unrelated/reloader/reloader-deployment.yaml: |
  # GARBAGE_K8S_417_RELOADER
  apiVersion: apps/v1
  kind: Deployment
  metadata:
    name: GARBAGE_K8S_417_RELOADER_NAME
  spec:
    replicas: 1
    selector:
      matchLabels:
        app: GARBAGE_K8S_417_RELOADER_LABEL
    template:
      spec:
        serviceAccountName: GARBAGE_K8S_417_RELOADER_SA
        containers:
        - name: reloader
          image: stakater/reloader:GARBAGE_K8S_417_RELOADER_VERSION
k8s/unrelated/descheduler/descheduler.yaml: |
  # GARBAGE_K8S_417_DESCHEDULER
  apiVersion: apps/v1
  kind: Deployment
  metadata:
    name: GARBAGE_K8S_417_DESCHED_NAME
  spec:
    template:
      spec:
        serviceAccountName: GARBAGE_K8S_417_DESCHED_SA
        containers:
        - name: descheduler
          image: registry.k8s.io/descheduler/descheduler:GARBAGE_K8S_417_DESCHED_VERSION
