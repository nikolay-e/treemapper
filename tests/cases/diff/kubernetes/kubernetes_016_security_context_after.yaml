k8s/apps/secure-api/deployment.yaml: |
  apiVersion: apps/v1
  kind: Deployment
  metadata:
    name: secure-api
    namespace: production
    labels:
      app: secure-api
      security-tier: high
  spec:
    replicas: 3
    selector:
      matchLabels:
        app: secure-api
    template:
      metadata:
        labels:
          app: secure-api
          security-tier: high
      spec:
        securityContext:
          runAsNonRoot: true
          runAsUser: 1000
          runAsGroup: 3000
          fsGroup: 2000
          seccompProfile:
            type: RuntimeDefault
        containers:
        - name: api
          image: secure-api:v1.0.0
          ports:
          - containerPort: 8080
          securityContext:
            allowPrivilegeEscalation: false
            readOnlyRootFilesystem: true
            privileged: false
            capabilities:
              drop:
              - ALL
              add:
              - NET_BIND_SERVICE
          resources:
            requests:
              memory: "256Mi"
              cpu: "250m"
            limits:
              memory: "512Mi"
              cpu: "500m"
          volumeMounts:
          - name: tmp
            mountPath: /tmp
        volumes:
        - name: tmp
          emptyDir: {}
k8s/apps/secure-api/service.yaml: |
  apiVersion: v1
  kind: Service
  metadata:
    name: secure-api
    namespace: production
  spec:
    selector:
      app: secure-api
    ports:
    - port: 443
      targetPort: 8080
k8s/unrelated/sealed-secrets/controller.yaml: |
  # GARBAGE_K8S_416_SEALED_SECRETS
  apiVersion: apps/v1
  kind: Deployment
  metadata:
    name: GARBAGE_K8S_416_SS_CONTROLLER
  spec:
    replicas: 1
    selector:
      matchLabels:
        app: GARBAGE_K8S_416_SS_LABEL
    template:
      spec:
        containers:
        - name: controller
          image: bitnami/sealed-secrets-controller:GARBAGE_K8S_416_SS_VERSION
k8s/unrelated/trivy/trivy-operator.yaml: |
  # GARBAGE_K8S_416_TRIVY_OPERATOR
  apiVersion: apps/v1
  kind: Deployment
  metadata:
    name: GARBAGE_K8S_416_TRIVY_NAME
  spec:
    template:
      spec:
        containers:
        - name: operator
          image: aquasec/trivy-operator:GARBAGE_K8S_416_TRIVY_VERSION
          env:
          - name: OPERATOR_NAMESPACE
            value: GARBAGE_K8S_416_TRIVY_NS
