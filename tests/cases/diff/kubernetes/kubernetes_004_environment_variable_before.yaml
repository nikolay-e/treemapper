src/config.py: |
  import os
  from dataclasses import dataclass

  @dataclass
  class DatabaseConfig:
      host: str = os.environ.get('DATABASE_HOST', 'localhost')
      port: int = int(os.environ.get('DATABASE_PORT', '5432'))
      name: str = os.environ.get('DATABASE_NAME', 'app')
      user: str = os.environ.get('DATABASE_USER', 'postgres')

  @dataclass
  class AppConfig:
      debug: bool = os.environ.get('DEBUG', 'false').lower() == 'true'
      log_level: str = os.environ.get('LOG_LEVEL', 'INFO')
      database: DatabaseConfig = None

      def __post_init__(self):
          self.database = DatabaseConfig()
k8s/apps/backend/deployment.yaml: |
  apiVersion: apps/v1
  kind: Deployment
  metadata:
    name: backend-api
    namespace: production
    labels:
      app: backend-api
      component: api
  spec:
    replicas: 3
    selector:
      matchLabels:
        app: backend-api
    template:
      metadata:
        labels:
          app: backend-api
          component: api
      spec:
        serviceAccountName: backend-sa
        containers:
        - name: api
          image: backend-api:v1.0.0
          ports:
          - containerPort: 8080
          env: []
          resources:
            requests:
              memory: "256Mi"
              cpu: "250m"
            limits:
              memory: "512Mi"
              cpu: "500m"
k8s/apps/backend/service.yaml: |
  apiVersion: v1
  kind: Service
  metadata:
    name: backend-api
    namespace: production
  spec:
    selector:
      app: backend-api
    ports:
    - port: 80
      targetPort: 8080
k8s/unrelated/operators/cert-manager.yaml: |
  # GARBAGE_K8S_404_CERT_MANAGER
  apiVersion: apps/v1
  kind: Deployment
  metadata:
    name: GARBAGE_K8S_404_CERT_CONTROLLER
    namespace: cert-manager
  spec:
    replicas: 1
    selector:
      matchLabels:
        app: GARBAGE_K8S_404_CERT_APP
    template:
      spec:
        containers:
        - name: controller
          image: quay.io/jetstack/cert-manager-controller:GARBAGE_K8S_404_CERT_VERSION
k8s/unrelated/ingress/traefik.yaml: |
  # GARBAGE_K8S_404_TRAEFIK_INGRESS
  apiVersion: apps/v1
  kind: DaemonSet
  metadata:
    name: GARBAGE_K8S_404_TRAEFIK_DS
  spec:
    selector:
      matchLabels:
        app: GARBAGE_K8S_404_TRAEFIK_LABEL
    template:
      spec:
        containers:
        - name: traefik
          image: traefik:GARBAGE_K8S_404_TRAEFIK_TAG
