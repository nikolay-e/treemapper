k8s/apps/web-frontend/deployment.yaml: |
  apiVersion: apps/v1
  kind: Deployment
  metadata:
    name: web-frontend
    namespace: production
    labels:
      app: web-frontend
      tier: frontend
  spec:
    replicas: 2
    selector:
      matchLabels:
        app: web-frontend
    strategy:
      type: RollingUpdate
      rollingUpdate:
        maxSurge: 1
        maxUnavailable: 0
    template:
      metadata:
        labels:
          app: web-frontend
          tier: frontend
      spec:
        containers:
        - name: nginx
          image: nginx:1.25-alpine
          ports:
          - containerPort: 80
          resources:
            requests:
              memory: "64Mi"
              cpu: "100m"
            limits:
              memory: "128Mi"
              cpu: "200m"
          livenessProbe:
            httpGet:
              path: /health
              port: 80
            initialDelaySeconds: 10
            periodSeconds: 5
k8s/apps/web-frontend/hpa.yaml: |
  apiVersion: autoscaling/v2
  kind: HorizontalPodAutoscaler
  metadata:
    name: web-frontend-hpa
    namespace: production
  spec:
    scaleTargetRef:
      apiVersion: apps/v1
      kind: Deployment
      name: web-frontend
    minReplicas: 2
    maxReplicas: 20
    metrics:
    - type: Resource
      resource:
        name: cpu
        target:
          type: Utilization
          averageUtilization: 70
k8s/unrelated/batch-jobs/cleanup.yaml: |
  # GARBAGE_K8S_402_BATCH_CLEANUP
  apiVersion: batch/v1
  kind: Job
  metadata:
    name: GARBAGE_K8S_402_CLEANUP_JOB
  spec:
    template:
      spec:
        containers:
        - name: cleanup
          image: busybox:GARBAGE_K8S_402_BUSYBOX_VERSION
          command: ["sh", "-c", "echo GARBAGE_K8S_402_CLEANUP_MARKER"]
        restartPolicy: Never
k8s/unrelated/secrets/external-api.yaml: |
  # GARBAGE_K8S_402_EXTERNAL_SECRET
  apiVersion: v1
  kind: Secret
  metadata:
    name: GARBAGE_K8S_402_API_SECRET
  type: Opaque
  data:
    api-key: R0FSQkFHRV9LOFM0MDJfQVBJX0tFWQ==
