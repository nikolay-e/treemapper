k8s/base/deployment.yaml: |
  apiVersion: apps/v1
  kind: Deployment
  metadata:
    name: web-app
    namespace: production
    labels:
      app: web-app
      tier: frontend
  spec:
    replicas: 4
    selector:
      matchLabels:
        app: web-app
    template:
      metadata:
        labels:
          app: web-app
          tier: frontend
      spec:
        containers:
        - name: web
          image: registry.example.com/web-app:v2.0.0
          ports:
          - containerPort: 3000
            name: http
          livenessProbe:
            httpGet:
              path: /health
              port: 3000
            initialDelaySeconds: 10
            periodSeconds: 15
          resources:
            requests:
              memory: "128Mi"
              cpu: "100m"
            limits:
              memory: "256Mi"
              cpu: "200m"
k8s/base/service.yaml: |
  apiVersion: v1
  kind: Service
  metadata:
    name: web-app
    namespace: production
  spec:
    selector:
      app: web-app
    ports:
    - name: http
      port: 80
      targetPort: 3000
k8s/base/ingress-class.yaml: |
  apiVersion: networking.k8s.io/v1
  kind: IngressClass
  metadata:
    name: nginx-internal
    annotations:
      ingressclass.kubernetes.io/is-default-class: "false"
  spec:
    controller: k8s.io/ingress-nginx
k8s/base/ingress.yaml: |
  apiVersion: networking.k8s.io/v1
  kind: Ingress
  metadata:
    name: web-app-ingress
    namespace: production
    labels:
      app: web-app
    annotations:
      nginx.ingress.kubernetes.io/ssl-redirect: "true"
      nginx.ingress.kubernetes.io/proxy-buffer-size: "16k"
      nginx.ingress.kubernetes.io/proxy-buffers-number: "4"
  spec:
    ingressClassName: nginx-internal
    tls:
    - hosts:
      - app.example.com
      secretName: web-app-tls
    rules:
    - host: app.example.com
      http:
        paths:
        - path: /
          pathType: Prefix
          backend:
            service:
              name: web-app
              port:
                number: 80
        - path: /static
          pathType: Prefix
          backend:
            service:
              name: web-app
              port:
                number: 80
k8s/base/configmap.yaml: |
  apiVersion: v1
  kind: ConfigMap
  metadata:
    name: web-app-config
    namespace: production
  data:
    API_URL: https://api.example.com
    FEATURE_FLAGS: '{"darkMode": true, "analytics": true}'
k8s/unrelated/aws/aws-load-balancer.yaml: |
  # GARBAGE_K8S_433_AWS_LB
  apiVersion: elbv2.k8s.aws/v1beta1
  kind: IngressClassParams
  metadata:
    name: GARBAGE_K8S_433_LB_PARAMS
  spec:
    scheme: GARBAGE_K8S_433_LB_SCHEME
    ipAddressType: GARBAGE_K8S_433_IP_TYPE
    tags:
    - key: GARBAGE_K8S_433_TAG_KEY
      value: GARBAGE_K8S_433_TAG_VALUE
k8s/unrelated/gcp/managed-certificate.yaml: |
  # GARBAGE_K8S_433_GCP_CERT
  apiVersion: networking.gke.io/v1
  kind: ManagedCertificate
  metadata:
    name: GARBAGE_K8S_433_MANAGED_CERT
    namespace: gcp-resources
  spec:
    domains:
    - GARBAGE_K8S_433_GCP_DOMAIN
k8s/unrelated/azure/azure-ingress.yaml: |
  # GARBAGE_K8S_433_AZURE_INGRESS
  apiVersion: networking.k8s.io/v1
  kind: Ingress
  metadata:
    name: GARBAGE_K8S_433_AZURE_ING
    namespace: azure
    annotations:
      kubernetes.io/ingress.class: GARBAGE_K8S_433_AZURE_CLASS
      appgw.ingress.kubernetes.io/backend-path-prefix: GARBAGE_K8S_433_PATH_PREFIX
pulumi/index.ts: |
  // GARBAGE_K8S_433_PULUMI
  import * as k8s from "@pulumi/kubernetes";
  const ns = new k8s.core.v1.Namespace("GARBAGE_K8S_433_PULUMI_NS");
  const config = { name: "GARBAGE_K8S_433_CONFIG_NAME" };
