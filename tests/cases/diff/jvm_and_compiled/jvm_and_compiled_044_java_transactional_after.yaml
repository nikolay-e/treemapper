src/main/java/com/example/OrderService.java: |
  package com.example;

  import org.springframework.stereotype.Service;
  import org.springframework.transaction.annotation.Transactional;
  import org.springframework.transaction.annotation.Propagation;
  import org.springframework.transaction.annotation.Isolation;

  @Service
  public class OrderService {
      @Transactional(
          propagation = Propagation.REQUIRED,
          isolation = Isolation.READ_COMMITTED,
          rollbackFor = Exception.class
      )
      public Order createOrder(Order order) {
          Order saved = orderRepository.save(order);
          inventoryService.updateStock(order.getItems());
          return saved;
      }

      @Transactional(readOnly = true)
      public Order getOrder(Long id) {
          return orderRepository.findById(id).orElse(null);
      }
  }
GarbageSagaOrchestrator.java: |
  public class GarbageSagaOrchestrator {
      public static final String GARBAGE_JVM_044_SAGA_MARKER_A = "marker";
      public static final String GARBAGE_JVM_044_COMPENSATE_MARKER_B = "marker";
      public void noop() {}
  }
GarbageLockManager.java: |
  public class GarbageLockManager {
      public static final String GARBAGE_JVM_044_LOCK_MARKER_C = "marker";
      public static final String GARBAGE_JVM_044_OPTIMISTIC_MARKER_D = "marker";
      public void noop() {}
  }
