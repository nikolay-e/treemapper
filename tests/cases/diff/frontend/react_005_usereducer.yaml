name: react_005_usereducer
initial:
  counterReducer.ts: |
    export interface CounterState {
        count: number;
        step: number;
    }

    export type CounterAction =
        | { type: 'INCREMENT' }
        | { type: 'DECREMENT' }
        | { type: 'SET_STEP'; payload: number }
        | { type: 'RESET' };

    export const initialState: CounterState = {
        count: 0,
        step: 1,
    };

    export function counterReducer(state: CounterState, action: CounterAction): CounterState {
        switch (action.type) {
            case 'INCREMENT':
                return { ...state, count: state.count + state.step };
            case 'DECREMENT':
                return { ...state, count: state.count - state.step };
            case 'SET_STEP':
                return { ...state, step: action.payload };
            case 'RESET':
                return initialState;
            default:
                return state;
        }
    }

    // react_garbage_marker_005
    function unusedReducerHelper() { return null; }
  Counter.tsx: |
    import React from 'react';

    export function Counter() {
        return <div>Initial</div>;
    }
changed:
  Counter.tsx: |
    import React, { useReducer } from 'react';
    import { counterReducer, initialState } from './counterReducer';

    export function Counter() {
        const [state, dispatch] = useReducer(counterReducer, initialState);

        return (
            <div>
                <p>Count: {state.count}</p>
                <p>Step: {state.step}</p>
                <button onClick={() => dispatch({ type: 'INCREMENT' })}>+</button>
                <button onClick={() => dispatch({ type: 'DECREMENT' })}>-</button>
                <button onClick={() => dispatch({ type: 'RESET' })}>Reset</button>
            </div>
        );
    }
assertions:
  must_include:
  - Counter.tsx
  - useReducer
  must_not_include:
  - react_garbage_marker_005
options:
  commit_message: Add useReducer with counterReducer
