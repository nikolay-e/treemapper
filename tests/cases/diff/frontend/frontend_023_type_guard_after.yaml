src/entities.ts: |
  export interface User {
      type: 'user';
      id: string;
      name: string;
      email: string;
  }

  export interface Admin extends User {
      type: 'admin';
      permissions: string[];
  }

  export interface Guest {
      type: 'guest';
      sessionId: string;
  }
src/guards.ts: |
  import { User, Admin, Guest } from './entities';

  export type Person = User | Admin | Guest;

  export function isUser(obj: unknown): obj is User {
      return typeof obj === 'object' && obj !== null &&
          'type' in obj && (obj as User).type === 'user';
  }

  export function isAdmin(person: Person): person is Admin {
      return person.type === 'admin';
  }

  export function isGuest(person: Person): person is Guest {
      return person.type === 'guest';
  }

  export function hasEmail(person: Person): person is User | Admin {
      return 'email' in person;
  }

  export function processIdentity(person: Person): string {
      if (isAdmin(person)) {
          return 'Admin: ' + person.name;
      }
      if (isGuest(person)) {
          return 'Guest: ' + person.sessionId;
      }
      return 'User: ' + person.name;
  }
src/unrelated/color_utils.ts: |
  // GARBAGE_FE_023_COLOR_A
  export interface HSL {
      h: number;
      s: number;
      l: number;
  }

  // GARBAGE_FE_023_COLOR_B
  export function hslToHex(hsl: HSL): string {
      const { h, s, l } = hsl;
      const a = s * Math.min(l, 1 - l);
      const f = (n: number) => {
          const k = (n + h / 30) % 12;
          return l - a * Math.max(Math.min(k - 3, 9 - k, 1), -1);
      };
      return '#' + [f(0), f(8), f(4)]
          .map(x => Math.round(x * 255).toString(16).padStart(2, '0'))
          .join('');
  }

  // GARBAGE_FE_023_CONTRAST_C
  export function contrastRatio(fg: HSL, bg: HSL): number {
      return Math.abs(fg.l - bg.l);
  }
src/unrelated/debounce_utils.ts: |
  // GARBAGE_FE_023_DEBOUNCE_D
  export function debounce<T extends (...args: any[]) => void>(
      fn: T, delay: number
  ): T {
      let timer: ReturnType<typeof setTimeout>;
      return ((...args: any[]) => {
          clearTimeout(timer);
          timer = setTimeout(() => fn(...args), delay);
      }) as T;
  }

  // GARBAGE_FE_023_THROTTLE_E
  export function throttle<T extends (...args: any[]) => void>(
      fn: T, limit: number
  ): T {
      let inThrottle = false;
      return ((...args: any[]) => {
          if (!inThrottle) {
              fn(...args);
              inThrottle = true;
              setTimeout(() => { inThrottle = false; }, limit);
          }
      }) as T;
  }
