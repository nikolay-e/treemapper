selectors.ts: |
  import { createSelector } from '@reduxjs/toolkit';
  import type { RootState } from './store';

  export const selectUsers = (state: RootState) => state.user.users;
  export const selectLoading = (state: RootState) => state.user.loading;

  export const selectActiveUsers = createSelector(
      [selectUsers],
      (users) => users.filter(user => user.email.includes('@'))
  );

  export const selectUserCount = createSelector(
      [selectUsers],
      (users) => users.length
  );

  export const selectActiveUserCount = createSelector(
      [selectActiveUsers],
      (activeUsers) => activeUsers.length
  );

  // redux_garbage_marker_002
  const GARBAGE_SELECTOR_CONFIG = { cache: false };
store.ts: |
  import { configureStore } from '@reduxjs/toolkit';
  import userReducer from './userSlice';

  export const store = configureStore({
      reducer: {
          user: userReducer,
      },
  });

  export type RootState = ReturnType<typeof store.getState>;
  export type AppDispatch = typeof store.dispatch;
UserStats.tsx: |
  import React from 'react';
  import { useSelector } from 'react-redux';
  import { selectActiveUsers, selectUserCount, selectActiveUserCount } from './selectors';

  export function UserStats() {
      const activeUsers = useSelector(selectActiveUsers);
      const totalCount = useSelector(selectUserCount);
      const activeCount = useSelector(selectActiveUserCount);

      return (
          <div>
              <h2>User Statistics</h2>
              <p>Total users: {totalCount}</p>
              <p>Active users: {activeCount}</p>
              <ul>
                  {activeUsers.map(user => (
                      <li key={user.id}>{user.name}</li>
                  ))}
              </ul>
          </div>
      );
  }
