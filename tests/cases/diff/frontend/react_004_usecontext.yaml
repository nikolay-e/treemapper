name: react_004_usecontext
initial:
  ThemeContext.tsx: |
    import React, { createContext, useContext, useState, ReactNode } from 'react';

    export interface Theme {
        primary: string;
        secondary: string;
        background: string;
    }

    export interface ThemeContextValue {
        theme: Theme;
        toggleTheme: () => void;
    }

    export const ThemeContext = createContext<ThemeContextValue | null>(null);

    export function ThemeProvider({ children }: { children: ReactNode }) {
        const [isDark, setIsDark] = useState(false);

        const theme: Theme = isDark
            ? { primary: '#fff', secondary: '#ccc', background: '#222' }
            : { primary: '#000', secondary: '#333', background: '#fff' };

        const toggleTheme = () => setIsDark(prev => !prev);

        return (
            <ThemeContext.Provider value={{ theme, toggleTheme }}>
                {children}
            </ThemeContext.Provider>
        );
    }

    // react_garbage_marker_004
    const UNUSED_THEME_CONFIG = { unused: true };
  ThemedButton.tsx: |
    import React from 'react';

    export function ThemedButton() {
        return <button>Initial</button>;
    }
changed:
  ThemedButton.tsx: |
    import React, { useContext } from 'react';
    import { ThemeContext } from './ThemeContext';

    export function ThemedButton({ label }: { label: string }) {
        const themeContext = useContext(ThemeContext);

        if (!themeContext) {
            return <button>{label}</button>;
        }

        const { theme, toggleTheme } = themeContext;

        return (
            <button
                style={{ color: theme.primary, background: theme.background }}
                onClick={toggleTheme}
            >
                {label}
            </button>
        );
    }
assertions:
  must_include:
  - ThemedButton.tsx
  - useContext
  must_not_include:
  - react_garbage_marker_004
options:
  commit_message: Add useContext for ThemeContext
