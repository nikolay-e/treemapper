ExpensiveComponent.tsx: |
  import React, { memo } from 'react';

  interface ExpensiveComponentProps {
      items: string[];
      onItemClick: (item: string) => void;
  }

  function areEqual(
      prevProps: ExpensiveComponentProps,
      nextProps: ExpensiveComponentProps
  ): boolean {
      return prevProps.items.length === nextProps.items.length &&
             prevProps.items.every((item, i) => item === nextProps.items[i]);
  }

  export const ExpensiveComponent = memo(function ExpensiveComponent({
      items,
      onItemClick,
  }: ExpensiveComponentProps) {
      console.log('ExpensiveComponent rendering');

      return (
          <ul>
              {items.map((item, index) => (
                  <li key={index} onClick={() => onItemClick(item)}>
                      {item}
                  </li>
              ))}
          </ul>
      );
  }, areEqual);
ParentComponent.tsx: |
  import React, { useState, useCallback } from 'react';
  import { ExpensiveComponent } from './ExpensiveComponent';

  export function ParentComponent() {
      const [items] = useState(['apple', 'banana', 'cherry']);
      const [count, setCount] = useState(0);

      const handleItemClick = useCallback((item: string) => {
          console.log('Clicked:', item);
      }, []);

      return (
          <div>
              <p>Count: {count}</p>
              <button onClick={() => setCount(c => c + 1)}>Increment</button>
              <ExpensiveComponent items={items} onItemClick={handleItemClick} />
          </div>
      );
  }
