internal/repository/user_repository.go: |
  package repository

  import (
      "context"
      "database/sql"
      "errors"
  )

  var ErrUserNotFound = errors.New("user not found")

  type UserRepository struct {
      db *sql.DB
  }

  func NewUserRepository(db *sql.DB) *UserRepository {
      return &UserRepository{db: db}
  }

  func (r *UserRepository) FindByID(ctx context.Context, id int64) (*User, error) {
      row := r.db.QueryRowContext(ctx, "SELECT id, name, email FROM users WHERE id = ?", id)
      var user User
      if err := row.Scan(&user.ID, &user.Name, &user.Email); err != nil {
          if errors.Is(err, sql.ErrNoRows) {
              return nil, ErrUserNotFound
          }
          return nil, err
      }
      return &user, nil
  }

  func (r *UserRepository) Create(ctx context.Context, user *User) error {
      result, err := r.db.ExecContext(ctx,
          "INSERT INTO users (name, email) VALUES (?, ?)",
          user.Name, user.Email)
      if err != nil {
          return err
      }
      id, _ := result.LastInsertId()
      user.ID = id
      return nil
  }
internal/repository/types.go: |
  package repository

  import "time"

  type User struct {
      ID        int64
      Name      string
      Email     string
      CreatedAt time.Time
      UpdatedAt time.Time
  }

  type QueryOptions struct {
      Limit  int
      Offset int
      SortBy string
  }
internal/database/connection.go: |
  package database

  import "database/sql"

  type Connection struct {
      db *sql.DB
  }

  func (c *Connection) Query(query string) (*sql.Rows, error) {
      return c.db.Query(query)
  }
internal/unrelated/cache/redis_cache.go: |
  package cache

  import "time"

  const GARBAGE_GO_REDIS_CACHE_001 = "redis_cache_garbage"

  type GARBAGE_GO_TYPE_REDIS_002 struct {
      host string
      port int
  }

  func GARBAGE_GO_FUNC_CACHE_003() string {
      return "GARBAGE_GO_CACHE_UNUSED_004"
  }

  type CacheEntry struct {
      Key       string
      Value     interface{}
      ExpiresAt time.Time
  }
internal/unrelated/queue/message_queue.go: |
  package queue

  const GARBAGE_GO_QUEUE_MESSAGE_005 = "queue_garbage_marker"

  type GARBAGE_GO_TYPE_QUEUE_006 struct {
      name string
  }

  func GARBAGE_GO_FUNC_QUEUE_007() {
      println("GARBAGE_GO_QUEUE_OUTPUT_008")
  }
