name: go_028_interface_composition
initial:
  interfaces.go: |
    package main

    type Reader interface {
        Read(p []byte) (n int, err error)
    }

    type Writer interface {
        Write(p []byte) (n int, err error)
    }

    type Closer interface {
        Close() error
    }
  file.go: |
    package main

    type File struct {
        path string
    }
  unrelated/garbage.go: |
    package unrelated

    func UnusedFileFunc_12345() {
        println("garbage_marker_12345")
    }

    func AnotherUnusedFunc_67890() {
        println("unused_marker_67890")
    }
changed:
  interfaces.go: |
    package main

    type Reader interface {
        Read(p []byte) (n int, err error)
    }

    type Writer interface {
        Write(p []byte) (n int, err error)
    }

    type Closer interface {
        Close() error
    }

    type ReadWriter interface {
        Reader
        Writer
    }

    type ReadWriteCloser interface {
        Reader
        Writer
        Closer
    }
  file.go: |
    package main

    type File struct {
        path string
    }

    func (f *File) Read(p []byte) (int, error)  { return 0, nil }
    func (f *File) Write(p []byte) (int, error) { return 0, nil }
    func (f *File) Close() error                { return nil }

    func Process(rwc ReadWriteCloser) {
        defer rwc.Close()
        buf := make([]byte, 1024)
        rwc.Read(buf)
        rwc.Write(buf)
    }
assertions:
  must_include:
  - ReadWriter
  - ReadWriteCloser
  - Process
  must_not_include:
  - garbage_marker_12345
  - unused_marker_67890
options:
  commit_message: Add composed interfaces
