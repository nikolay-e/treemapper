name: python_059_celery_task_delay
initial:
  tasks.py: |
    from celery import shared_task

    @shared_task
    def send_email(to: str, subject: str, body: str):
        print(f"Sending email to {to}")
        return True

    @shared_task
    def process_data(data: dict):
        return {"processed": True}
  views.py: |
    def submit():
        pass
  garbage.py: |
    garbage_marker_12345 = "celery garbage"
    unused_marker_67890 = "unused celery"
changed:
  views.py: |
    from tasks import send_email

    def submit(email: str):
        send_email.delay(email, "Welcome", "Hello!")
        return {"status": "queued"}
assertions:
  must_include:
  - '@shared_task'
  must_not_include:
  - garbage_marker_12345
  - unused_marker_67890
