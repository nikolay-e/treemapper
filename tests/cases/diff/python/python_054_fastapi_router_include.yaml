name: python_054_fastapi_router_include
initial:
  routers/users.py: |
    from fastapi import APIRouter, Depends
    from schemas import UserCreate, UserResponse

    router = APIRouter(prefix="/users", tags=["users"])

    @router.post("/", response_model=UserResponse)
    async def create_user(user: UserCreate):
        return {"id": 1, **user.dict()}

    @router.get("/{user_id}", response_model=UserResponse)
    async def get_user(user_id: int):
        return {"id": user_id, "name": "John"}
  main.py: |
    from fastapi import FastAPI
  garbage.py: |
    garbage_marker_12345 = "fastapi garbage"
    unused_marker_67890 = "unused fastapi"
changed:
  main.py: |
    from fastapi import FastAPI
    from routers.users import router as users_router

    app = FastAPI()
    app.include_router(users_router)
assertions:
  must_include:
  - users.py
  must_not_include:
  - garbage_marker_12345
  - unused_marker_67890
