name: python_046_lazy_import
initial:
  heavy.py: |
    import time

    def expensive_init():
        time.sleep(0.1)
        return {"initialized": True}

    data = expensive_init()

    def get_data():
        return data
  service.py: |
    def process():
        pass
  garbage.py: |
    garbage_marker_12345 = "heavy garbage"
    unused_marker_67890 = "unused heavy"
changed:
  service.py: |
    def get_heavy():
        import heavy
        return heavy.get_data()

    def process():
        data = get_heavy()
        return data
assertions:
  must_include:
  - def get_data
  must_not_include:
  - garbage_marker_12345
  - unused_marker_67890
