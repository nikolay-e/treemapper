name: python_030_typevar_with_bound
initial:
  base.py: |
    class BaseModel:
        def validate(self) -> bool:
            return True

        def to_dict(self) -> dict:
            return {}
  repository.py: |
    def save():
        pass
  garbage.py: |
    garbage_marker_12345 = "typevar garbage"
    unused_marker_67890 = "unused typevar"
changed:
  repository.py: |
    from typing import TypeVar
    from base import BaseModel

    T = TypeVar('T', bound=BaseModel)

    def save(model: T) -> T:
        if model.validate():
            return model
        raise ValueError("Invalid model")
assertions:
  must_include:
  - class BaseModel
  must_not_include:
  - garbage_marker_12345
  - unused_marker_67890
