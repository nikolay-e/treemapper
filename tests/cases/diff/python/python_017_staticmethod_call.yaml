name: python_017_staticmethod_call
initial:
  validators.py: |
    import re
    from typing import Optional
    from dataclasses import dataclass
    from enum import Enum

    class ValidationSeverity(Enum):
        INFO = "info"
        WARNING = "warning"
        ERROR = "error"

    @dataclass
    class ValidationResult:
        is_valid: bool
        severity: ValidationSeverity
        message: Optional[str] = None

    class Validator:
        EMAIL_PATTERN = re.compile(r'^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$')
        PHONE_PATTERN = re.compile(r'^\+?[1-9]\d{9,14}$')

        @staticmethod
        def is_email(text: str) -> bool:
            if not text or not isinstance(text, str):
                return False
            return bool(Validator.EMAIL_PATTERN.match(text.strip()))

        @staticmethod
        def is_phone(text: str) -> bool:
            if not text or not isinstance(text, str):
                return False
            cleaned = text.replace("-", "").replace(" ", "")
            return bool(Validator.PHONE_PATTERN.match(cleaned))

        @staticmethod
        def sanitize_input(text: str) -> str:
            dangerous = ['<', '>', '"', "'", '&']
            result = text
            for char in dangerous:
                result = result.replace(char, '')
            return result.strip()

  forms.py: |
    def validate_form():
        pass

  garbage_unrelated_db.py: |
    GARBAGE_PY_DB_847291 = "database connection garbage"
    UNRELATED_DB_MARKER_392847 = "unused db connection pooling"

    class GarbageDatabaseConnection:
        GARBAGE_CONN_STR_182736 = "postgres://garbage"

        def garbage_connect(self):
            return self.GARBAGE_CONN_STR_182736

  garbage_unrelated_cache.py: |
    GARBAGE_PY_CACHE_563829 = "redis cache garbage"
    UNRELATED_CACHE_MARKER_847261 = "unused cache invalidation"

    class GarbageCacheManager:
        GARBAGE_CACHE_TTL_928374 = 3600

        def garbage_get(self, key):
            return f"Garbage cached: {key}"

changed:
  forms.py: |
    from validators import Validator, ValidationResult, ValidationSeverity

    class ContactForm:
        def __init__(self):
            self.errors: list[ValidationResult] = []

        def validate_email(self, email: str) -> bool:
            if not Validator.is_email(email):
                self.errors.append(ValidationResult(
                    False, ValidationSeverity.ERROR, "Invalid email"
                ))
                return False
            return True

        def validate_phone(self, phone: str) -> bool:
            if not Validator.is_phone(phone):
                self.errors.append(ValidationResult(
                    False, ValidationSeverity.WARNING, "Invalid phone"
                ))
                return False
            return True

    def validate_form(email: str, phone: str) -> dict:
        form = ContactForm()
        valid_email = form.validate_email(email)
        valid_phone = form.validate_phone(phone)
        return {
            "email": Validator.sanitize_input(email),
            "phone": phone,
            "valid": valid_email and valid_phone
        }

assertions:
  must_include:
    - Validator.is_email
    - Validator.is_phone
    - ContactForm
  must_not_include:
    - GARBAGE_PY_DB_847291
    - UNRELATED_DB_MARKER_392847
    - GARBAGE_PY_CACHE_563829
    - UNRELATED_CACHE_MARKER_847261
    - GarbageDatabaseConnection
    - GarbageCacheManager
