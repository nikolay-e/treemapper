name: python_043_conditional_import
initial:
  compat.py: |
    import sys

    if sys.version_info >= (3, 11):
        import tomllib
    else:
        import tomli as tomllib
  config.py: |
    def load():
        pass
  garbage.py: |
    garbage_marker_12345 = "compat garbage"
    unused_marker_67890 = "unused compat"
changed:
  config.py: |
    from compat import tomllib

    def load(path: str) -> dict:
        with open(path, "rb") as f:
            return tomllib.load(f)
assertions:
  must_include:
  - tomllib
  must_not_include:
  - garbage_marker_12345
  - unused_marker_67890
