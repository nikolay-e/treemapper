name: python_048_exception_handler
initial:
  errors.py: |
    class DatabaseError(Exception):
        pass

    class ConnectionError(DatabaseError):
        pass
  handler.py: |
    def handle():
        pass
  garbage.py: |
    garbage_marker_12345 = "error garbage"
    unused_marker_67890 = "unused error"
changed:
  handler.py: |
    from errors import DatabaseError, ConnectionError

    def handle():
        try:
            connect()
        except ConnectionError as e:
            return {"error": "connection", "detail": str(e)}
        except DatabaseError as e:
            return {"error": "database", "detail": str(e)}

    def connect():
        pass
assertions:
  must_include:
  - DatabaseError
  must_not_include:
  - garbage_marker_12345
  - unused_marker_67890
