nginx/nginx.conf: "worker_processes auto;\nevents {\n    worker_connections 1024;\n}\nhttp {\n    upstream api {\n        server api:8080;\n    }\n    server {\n        listen 80;\n        location / {\n\
  \            proxy_pass http://api;\n            proxy_set_header Host $host;\n            proxy_set_header X-Real-IP $remote_addr;\n        }\n    }\n}\n"
nginx/ssl.conf: 'ssl_protocols TLSv1.2 TLSv1.3;

  ssl_ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256;

  ssl_prefer_server_ciphers off;

  '
prometheus/prometheus.yml: "global:\n  scrape_interval: 15s\nscrape_configs:\n  - job_name: 'api'\n    static_configs:\n      - targets: ['api:8080']\n"
docker-compose.yml: "version: '3.8'\n\nservices:\n  nginx:\n    image: nginx:alpine\n    ports:\n      - \"80:80\"\n      - \"443:443\"\n    configs:\n      - source: nginx_main\n        target: /etc/nginx/nginx.conf\n\
  \        mode: 0440\n      - source: nginx_ssl\n        target: /etc/nginx/conf.d/ssl.conf\n        mode: 0440\n      - source: nginx_mime\n        target: /etc/nginx/mime.types\n    secrets:\n      -\
  \ source: ssl_cert\n        target: /etc/nginx/ssl/cert.pem\n      - source: ssl_key\n        target: /etc/nginx/ssl/key.pem\n        mode: 0400\n    depends_on:\n      - api\n    healthcheck:\n     \
  \ test: [\"CMD\", \"curl\", \"-f\", \"http://localhost/health\"]\n      interval: 30s\n      timeout: 10s\n      retries: 3\n\n  api:\n    build: ./api\n    configs:\n      - source: app_config\n    \
  \    target: /app/config/app.yaml\n    expose:\n      - \"8080\"\n\n  prometheus:\n    image: prom/prometheus:v2.48.0\n    configs:\n      - source: prometheus_config\n        target: /etc/prometheus/prometheus.yml\n\
  \    ports:\n      - \"9090:9090\"\n\nconfigs:\n  nginx_main:\n    file: ./nginx/nginx.conf\n  nginx_ssl:\n    file: ./nginx/ssl.conf\n  nginx_mime:\n    external: true\n    name: nginx_mime_types_v1\n\
  \  app_config:\n    file: ./config/app.yaml\n  prometheus_config:\n    file: ./prometheus/prometheus.yml\n\nsecrets:\n  ssl_cert:\n    file: ./secrets/ssl/cert.pem\n  ssl_key:\n    file: ./secrets/ssl/key.pem\n"
scripts/update_config.sh: '#!/bin/bash

  docker-compose up -d --no-deps nginx

  '
tests/test_configs.py: "def test_config_mounted():\n    pass\n"
docs/configuration.md: '# Configuration Management

  '
ansible/templates/nginx.conf.j2: ''
k8s/configmap.yaml: ''
