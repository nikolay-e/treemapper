src/worker.py: "import os\nimport time\nimport signal\nimport sys\n\nWORKER_ID = os.getenv(\"HOSTNAME\", \"unknown\")\nQUEUE_URL = os.getenv(\"QUEUE_URL\", \"redis://localhost:6379\")\n\nshutdown = False\n\
  \ndef handle_signal(signum, frame):\n    global shutdown\n    print(f\"Worker {WORKER_ID}: received signal {signum}\")\n    shutdown = True\n\ndef process_task(task_data: str):\n    print(f\"Worker {WORKER_ID}:\
  \ processing {task_data}\")\n    time.sleep(2)\n    return True\n\ndef run():\n    signal.signal(signal.SIGTERM, handle_signal)\n    signal.signal(signal.SIGINT, handle_signal)\n    print(f\"Worker {WORKER_ID}\
  \ starting, queue={QUEUE_URL}\")\n\n    while not shutdown:\n        process_task(\"next-task\")\n        time.sleep(1)\n\n    print(f\"Worker {WORKER_ID} shutting down\")\n\nif __name__ == \"__main__\"\
  :\n    run()\n"
src/health.py: "from flask import Flask, jsonify\n\nhealth_app = Flask(__name__)\n\n@health_app.route('/healthz')\ndef healthz():\n    return jsonify(status='healthy')\n\n@health_app.route('/readyz')\n\
  def readyz():\n    return jsonify(ready=True)\n"
requirements.txt: 'flask==2.3.0

  redis==5.0.0

  '
Dockerfile: 'FROM python:3.12-slim

  WORKDIR /app

  COPY requirements.txt .

  RUN pip install --no-cache-dir -r requirements.txt

  COPY src/ ./src/

  USER nobody

  CMD ["python", "src/worker.py"]

  '
docker-compose.yml: "version: '3.8'\nservices:\n  worker:\n    build: .\n    environment:\n      - QUEUE_URL=redis://redis:6379\n    deploy:\n      replicas: 3\n      resources:\n        limits:\n     \
  \     cpus: '0.5'\n          memory: 256M\n    depends_on:\n      - redis\n  redis:\n    image: redis:7-alpine\n    volumes:\n      - redis_data:/data\nvolumes:\n  redis_data:\n"
scripts/scale_workers.sh: '#!/bin/bash

  docker-compose up --scale worker=3

  '
tests/test_worker.py: "def test_process_task():\n    pass\n"
docs/scaling.md: '# Scaling Guide

  '
k8s/hpa.yaml: 'apiVersion: autoscaling/v2

  '
monitoring/grafana-dashboard.json: '{

  }

  '
