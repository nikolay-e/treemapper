api/src/app.py: "from flask import Flask, jsonify\nfrom flask_cors import CORS\nimport os\n\napp = Flask(__name__)\nCORS(app)\n\n@app.route('/health')\ndef health():\n    return jsonify(status='ok', service='api')\n\
  \n@app.route('/api/v1/users')\ndef get_users():\n    return jsonify(users=[])\n\nif __name__ == '__main__':\n    app.run(host='0.0.0.0', port=8080)\n"
api/requirements.txt: 'flask==2.3.0

  flask-cors==4.0.0

  gunicorn==21.2.0

  '
api/Dockerfile: 'FROM python:3.12-slim

  WORKDIR /app

  COPY requirements.txt .

  RUN pip install -r requirements.txt

  COPY src/ ./src/

  CMD ["gunicorn", "-b", "0.0.0.0:8080", "src.app:app"]

  '
docker-compose.yml: "version: '3.8'\n\nservices:\n  api:\n    build:\n      context: ./api\n      dockerfile: Dockerfile\n      args:\n        - BUILD_DATE=${BUILD_DATE:-}\n        - GIT_SHA=${GIT_SHA:-unknown}\n\
  \    image: myregistry/api:${VERSION:-latest}\n    container_name: api-service\n    hostname: api\n    ports:\n      - \"8080:8080\"\n    environment:\n      - APP_ENV=production\n      - LOG_LEVEL=info\n\
  \    env_file:\n      - .env\n    volumes:\n      - api_logs:/var/log/app\n    restart: unless-stopped\n    healthcheck:\n      test: [\"CMD\", \"curl\", \"-f\", \"http://localhost:8080/health\"]\n  \
  \    interval: 30s\n      timeout: 10s\n      retries: 3\n      start_period: 40s\n    logging:\n      driver: json-file\n      options:\n        max-size: \"10m\"\n        max-file: \"3\"\n\n  worker:\n\
  \    build:\n      context: ./api\n      dockerfile: Dockerfile\n    image: myregistry/api:${VERSION:-latest}\n    container_name: worker-service\n    command: [\"python\", \"-m\", \"src.worker\"]\n \
  \   environment:\n      - APP_ENV=production\n      - WORKER_CONCURRENCY=4\n    depends_on:\n      api:\n        condition: service_healthy\n    restart: unless-stopped\n\nvolumes:\n  api_logs:\n"
scripts/start_services.sh: '#!/bin/bash

  docker-compose up -d

  '
tests/test_services.py: "def test_service_health():\n    pass\n"
docs/services.md: '# Services

  '
k8s/service.yaml: 'apiVersion: v1

  '
