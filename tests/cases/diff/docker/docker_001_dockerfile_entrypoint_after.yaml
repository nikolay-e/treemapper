src/main.py: "import os\nimport sys\nimport logging\n\nlogging.basicConfig(level=logging.INFO)\nlogger = logging.getLogger(__name__)\n\ndef parse_arguments():\n    return {\"mode\": os.getenv(\"APP_MODE\"\
  , \"server\")}\n\ndef run_server():\n    logger.info(\"Starting HTTP server on port 8080\")\n\ndef run_worker():\n    logger.info(\"Starting background worker\")\n\ndef main():\n    args = parse_arguments()\n\
  \    if args[\"mode\"] == \"server\":\n        run_server()\n    else:\n        run_worker()\n\nif __name__ == \"__main__\":\n    main()\n"
src/config.py: 'import os


  DATABASE_URL = os.getenv("DATABASE_URL", "sqlite:///app.db")

  REDIS_URL = os.getenv("REDIS_URL", "redis://localhost:6379")

  LOG_LEVEL = os.getenv("LOG_LEVEL", "INFO")

  '
requirements.txt: 'flask==2.3.0

  gunicorn==21.2.0

  redis==5.0.0

  sqlalchemy==2.0.0

  '
Dockerfile: '# Build stage

  FROM python:3.12-slim AS builder

  WORKDIR /build

  COPY requirements.txt .

  RUN pip install --no-cache-dir --target=/deps -r requirements.txt


  # Production stage

  FROM python:3.12-slim AS production

  WORKDIR /app


  # Security: run as non-root user

  RUN useradd --create-home --shell /bin/bash appuser


  # Copy dependencies and source

  COPY --from=builder /deps /usr/local/lib/python3.12/site-packages

  COPY src/ ./src/

  COPY requirements.txt .


  # Set environment variables

  ENV PYTHONUNBUFFERED=1

  ENV PYTHONDONTWRITEBYTECODE=1

  ENV APP_MODE=server


  USER appuser

  EXPOSE 8080


  ENTRYPOINT ["python", "-m", "src.main"]

  CMD ["--mode", "server"]

  '
scripts/start.sh: '#!/bin/bash

  python src/main.py

  '
tests/test_main.py: "def test_main():\n    pass\n"
docs/deployment.md: '# Deployment Guide

  '
k8s/pod.yaml: 'apiVersion: v1

  '
.github/workflows/ci.yml: 'name: CI

  '
