app.py: |
  from flask import Flask, jsonify
  import os
  import time

  app = Flask(__name__)
  START_TIME = time.time()

  @app.route('/health')
  def health():
      return 'OK', 200

  @app.route('/healthz')
  def healthz():
      uptime = time.time() - START_TIME
      return jsonify({
          'status': 'healthy',
          'uptime_seconds': round(uptime, 2)
      })

  @app.route('/ready')
  def ready():
      return jsonify({'status': 'ready'})

  if __name__ == '__main__':
      app.run(host='0.0.0.0', port=8080)
config.py: |
  import os

  HEALTH_CHECK_INTERVAL = int(os.getenv('HEALTH_CHECK_INTERVAL', '30'))
  HEALTH_CHECK_TIMEOUT = int(os.getenv('HEALTH_CHECK_TIMEOUT', '3'))
  START_PERIOD = int(os.getenv('START_PERIOD', '5'))
requirements.txt: |
  flask==2.3.0
  gunicorn==21.2.0
Dockerfile: |
  FROM python:3.11-slim
  COPY app.py .
  RUN pip install flask
  CMD ["python", "app.py"]
scripts/health_test.sh: |
  #!/bin/bash
  # GARBAGE_DOCKER_511_HEALTH_MARKER_x1y2z3
  GARBAGE_DOCKER_511_ENDPOINT_a4b5c6="/health"
  curl -f http://localhost:8080/health
tests/test_health.py: |
  # GARBAGE_DOCKER_511_TEST_MARKER_d7e8f9
  GARBAGE_DOCKER_511_TEST_URL_g0h1i2 = "http://localhost:8080"
  def test_health_endpoint():
      pass
docs/health.md: |
  # Health Check Documentation
  GARBAGE_DOCKER_511_DOC_MARKER_j3k4l5
  GARBAGE_DOCKER_511_ENDPOINTS_m6n7o8="/health,/healthz,/ready"
k8s/probes.yaml: |
  # GARBAGE_DOCKER_511_K8S_MARKER_p9q0r1
  livenessProbe:
    GARBAGE_DOCKER_511_PROBE_PATH_s2t3u4: /health
prometheus/scrape.yml: |
  # GARBAGE_DOCKER_511_PROM_MARKER_v5w6x7
  GARBAGE_DOCKER_511_SCRAPE_PATH_y8z9a0: /metrics
