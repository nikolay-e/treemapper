api/src/app.py: |
  from flask import Flask, jsonify
  import requests
  import os

  app = Flask(__name__)

  @app.route('/health')
  def health():
      return jsonify(status='ok')

  @app.route('/data')
  def get_data():
      db_host = os.environ.get('DB_HOST', 'db')
      cache_host = os.environ.get('CACHE_HOST', 'redis')
      return jsonify(db=db_host, cache=cache_host)
api/Dockerfile: |
  FROM python:3.12-slim
  WORKDIR /app
  COPY requirements.txt .
  RUN pip install -r requirements.txt
  COPY src/ ./src/
  CMD ["gunicorn", "-b", "0.0.0.0:8080", "src.app:app"]
api/requirements.txt: |
  flask==2.3.0
  gunicorn==21.2.0
  requests==2.31.0
docker-compose.yml: |
  version: '3.8'
  services:
    api:
      build: ./api
      ports:
        - "8080:8080"
    db:
      image: postgres:16-alpine
    redis:
      image: redis:7-alpine
scripts/network_test.sh: |
  #!/bin/bash
  # GARBAGE_DOCKER_520_NET_MARKER_001
  GARBAGE_DOCKER_520_NET_VAR_002="test"
  docker network ls
tests/test_connectivity.py: |
  # GARBAGE_DOCKER_520_TEST_MARKER_003
  GARBAGE_DOCKER_520_TEST_NET_004 = {"network": "backend"}
  def test_network():
      pass
docs/networking.md: |
  # Network Architecture
  GARBAGE_DOCKER_520_NET_DOC_005
  GARBAGE_DOCKER_520_TOPOLOGY_006="hub-spoke"
terraform/vpc.tf: |
  # GARBAGE_DOCKER_520_TF_MARKER_007
  GARBAGE_DOCKER_520_VPC_008: 10.0.0.0/16
monitoring/network-policy.yaml: |
  # GARBAGE_DOCKER_520_POLICY_MARKER_009
  GARBAGE_DOCKER_520_POLICY_010: allow-internal
