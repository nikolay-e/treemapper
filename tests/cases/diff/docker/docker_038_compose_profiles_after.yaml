api/src/app.py: "from flask import Flask, jsonify\nimport os\n\napp = Flask(__name__)\nDEBUG = os.environ.get('DEBUG', 'false').lower() == 'true'\n\n@app.route('/health')\ndef health():\n    return jsonify(status='ok',\
  \ debug=DEBUG)\n\n@app.route('/debug/config')\ndef debug_config():\n    if not DEBUG:\n        return jsonify(error='Debug mode disabled'), 403\n    return jsonify(config=dict(os.environ))\n"
api/Dockerfile: 'FROM python:3.12-slim

  WORKDIR /app

  COPY requirements.txt .

  RUN pip install -r requirements.txt

  COPY src/ ./src/

  CMD ["gunicorn", "-b", "0.0.0.0:8080", "src.app:app"]

  '
api/requirements.txt: 'flask==2.3.0

  gunicorn==21.2.0

  '
docker-compose.yml: "version: '3.8'\n\nservices:\n  api:\n    build: ./api\n    ports:\n      - \"8080:8080\"\n    environment:\n      - DEBUG=${DEBUG:-false}\n    depends_on:\n      db:\n        condition:\
  \ service_healthy\n\n  db:\n    image: postgres:16-alpine\n    environment:\n      - POSTGRES_PASSWORD=secret\n    healthcheck:\n      test: [\"CMD-SHELL\", \"pg_isready\"]\n      interval: 10s\n    \
  \  timeout: 5s\n      retries: 5\n\n  # Debug tools - only started with: docker-compose --profile debug up\n  debug:\n    image: nicolaka/netshoot:latest\n    command: [\"tail\", \"-f\", \"/dev/null\"\
  ]\n    network_mode: \"service:api\"\n    profiles:\n      - debug\n\n  pgadmin:\n    image: dpage/pgadmin4:latest\n    environment:\n      - PGADMIN_DEFAULT_EMAIL=admin@example.com\n      - PGADMIN_DEFAULT_PASSWORD=admin\n\
  \    ports:\n      - \"5050:80\"\n    profiles:\n      - debug\n      - tools\n\n  # Monitoring stack - only with: docker-compose --profile monitoring up\n  prometheus:\n    image: prom/prometheus:v2.48.0\n\
  \    volumes:\n      - ./prometheus.yml:/etc/prometheus/prometheus.yml:ro\n    ports:\n      - \"9090:9090\"\n    profiles:\n      - monitoring\n\n  grafana:\n    image: grafana/grafana:10.2.2\n    ports:\n\
  \      - \"3000:3000\"\n    profiles:\n      - monitoring\n\n  # Testing tools - only with: docker-compose --profile testing up\n  testrunner:\n    build: ./api\n    command: [\"pytest\", \"tests/\"]\n\
  \    environment:\n      - DATABASE_URL=postgresql://postgres:secret@db:5432/test\n    depends_on:\n      db:\n        condition: service_healthy\n    profiles:\n      - testing\n"
scripts/run_debug.sh: '#!/bin/bash

  docker-compose --profile debug up

  '
tests/test_profiles.py: "def test_profiles():\n    pass\n"
docs/profiles.md: '# Compose Profiles

  '
k8s/overlays/dev.yaml: ''
.env.local: ''
