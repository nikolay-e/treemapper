src/index.js: |
  const express = require('express');
  const cors = require('cors');
  const helmet = require('helmet');

  const app = express();
  app.use(cors());
  app.use(helmet());
  app.use(express.json());

  app.get('/api/health', (req, res) => {
      res.json({ status: 'healthy', timestamp: Date.now() });
  });

  app.get('/api/users', (req, res) => {
      res.json({ users: [] });
  });

  const PORT = process.env.PORT || 3000;
  app.listen(PORT, () => console.log(`Server running on port ${PORT}`));
src/middleware/auth.js: |
  const jwt = require('jsonwebtoken');

  function authenticateToken(req, res, next) {
      const token = req.headers['authorization']?.split(' ')[1];
      if (!token) return res.sendStatus(401);
      jwt.verify(token, process.env.JWT_SECRET, (err, user) => {
          if (err) return res.sendStatus(403);
          req.user = user;
          next();
      });
  }

  module.exports = { authenticateToken };
package.json: |
  {
    "name": "api-server",
    "version": "1.0.0",
    "main": "src/index.js",
    "scripts": {
      "start": "node src/index.js",
      "dev": "nodemon src/index.js"
    },
    "dependencies": {
      "express": "^4.18.2",
      "cors": "^2.8.5",
      "helmet": "^7.1.0",
      "jsonwebtoken": "^9.0.0"
    }
  }
Dockerfile: |
  # Build stage - install dependencies
  FROM node:20-alpine AS deps
  WORKDIR /app
  COPY package*.json ./
  RUN npm ci --only=production && \
      npm cache clean --force

  # Build stage - for development dependencies
  FROM node:20-alpine AS builder
  WORKDIR /app
  COPY package*.json ./
  RUN npm ci
  COPY src/ ./src/

  # Production stage
  FROM node:20-alpine AS production
  WORKDIR /app

  # Security: run as non-root
  RUN addgroup -g 1001 -S nodejs && \
      adduser -S nodejs -u 1001

  # Copy production dependencies
  COPY --from=deps --chown=nodejs:nodejs /app/node_modules ./node_modules
  COPY --from=builder --chown=nodejs:nodejs /app/src ./src
  COPY --chown=nodejs:nodejs package*.json ./

  USER nodejs
  EXPOSE 3000

  ENV NODE_ENV=production
  ENV PORT=3000

  HEALTHCHECK --interval=30s --timeout=3s --start-period=5s \
      CMD wget --no-verbose --tries=1 --spider http://localhost:3000/api/health || exit 1

  CMD ["node", "src/index.js"]
scripts/deploy.sh: |
  #!/bin/bash
  # GARBAGE_DOCKER_072_DEPLOY_MARKER_x1y2z3
  GARBAGE_DOCKER_072_DEPLOY_ENV_a4b5c6="staging"
  docker build -t api:latest .
tests/api.test.js: |
  // GARBAGE_DOCKER_072_TEST_MARKER_d7e8f9
  const GARBAGE_DOCKER_072_TEST_SUITE_g0h1i2 = "integration";
  describe('API', () => {
      it('should return health', () => {});
  });
docs/api.md: |
  # API Documentation
  GARBAGE_DOCKER_072_DOC_MARKER_j3k4l5
  GARBAGE_DOCKER_072_SWAGGER_m6n7o8="v3"
terraform/main.tf: |
  # GARBAGE_DOCKER_072_TF_MARKER_p9q0r1
  provider "aws" {
    GARBAGE_DOCKER_072_TF_REGION_s2t3u4 = "us-east-1"
  }
.github/workflows/build.yml: |
  # GARBAGE_DOCKER_072_GH_MARKER_v5w6x7
  name: Build
  GARBAGE_DOCKER_072_TRIGGER_y8z9a0: push
