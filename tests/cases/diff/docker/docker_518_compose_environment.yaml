name: docker_518_compose_environment
initial:
  .env: |
    DB_URL=postgres://localhost:5432/mydb
    SECRET_KEY=mysecret
  app.py: |
    import os
    db_url = os.environ.get('DATABASE_URL')
  docker-compose.yml: |
    version: '3.8'
    services:
      api:
        build: .
  unrelated.md: |
    # garbage_marker_12345
    unused_marker_67890
changed:
  docker-compose.yml: |
    version: '3.8'
    services:
      api:
        build: .
        environment:
          - DATABASE_URL=${DB_URL}
          - SECRET_KEY=${SECRET_KEY}
assertions:
  must_include:
  - 'environment:'
  must_not_include:
  - garbage_marker_12345
  - unused_marker_67890
options:
  commit_message: Add compose environment
