src/health.py: "from flask import Flask, jsonify\nimport os\nimport psutil\nimport time\n\napp = Flask(__name__)\nSTART_TIME = time.time()\n\n@app.route(\"/health\")\ndef health():\n    return jsonify({\"\
  status\": \"healthy\"})\n\n@app.route(\"/healthz\")\ndef healthz():\n    uptime = time.time() - START_TIME\n    memory = psutil.virtual_memory()\n    cpu = psutil.cpu_percent(interval=0.1)\n\n    return\
  \ jsonify({\n        \"status\": \"healthy\",\n        \"uptime_seconds\": round(uptime, 2),\n        \"memory_percent\": memory.percent,\n        \"cpu_percent\": cpu,\n        \"checks\": {\n      \
  \      \"memory\": memory.percent < 90,\n            \"cpu\": cpu < 80\n        }\n    })\n\n@app.route(\"/ready\")\ndef ready():\n    # Check if dependencies are available\n    checks = {\n        \"\
  database\": check_database(),\n        \"cache\": check_cache()\n    }\n    status = \"ready\" if all(checks.values()) else \"not_ready\"\n    code = 200 if status == \"ready\" else 503\n    return jsonify({\"\
  status\": status, \"checks\": checks}), code\n\ndef check_database():\n    # Simulated check\n    return True\n\ndef check_cache():\n    # Simulated check\n    return True\n"
src/app.py: "from health import app, check_database, check_cache\n\n@app.route(\"/api/data\")\ndef get_data():\n    return {\"data\": [1, 2, 3]}\n\nif __name__ == \"__main__\":\n    app.run(host=\"0.0.0.0\"\
  , port=8080)\n"
requirements.txt: 'flask==2.3.0

  psutil==5.9.0

  gunicorn==21.2.0

  '
Dockerfile: 'FROM python:3.12-slim

  WORKDIR /app

  RUN apt-get update && apt-get install -y curl && rm -rf /var/lib/apt/lists/*

  COPY requirements.txt .

  RUN pip install -r requirements.txt

  COPY src/ ./src/

  CMD ["gunicorn", "-b", "0.0.0.0:8080", "src.app:app"]

  '
docker-compose.yml: "version: '3.8'\n\nservices:\n  api:\n    build:\n      context: .\n      dockerfile: Dockerfile\n    ports:\n      - \"8080:8080\"\n    healthcheck:\n      test: [\"CMD\", \"curl\"\
  , \"-sf\", \"http://localhost:8080/healthz\"]\n      interval: 10s\n      timeout: 5s\n      retries: 3\n      start_period: 30s\n    restart: unless-stopped\n    deploy:\n      resources:\n        limits:\n\
  \          memory: 512M\n\n  api-sidecar:\n    image: alpine:latest\n    command: sh -c \"while true; do wget -q -O- http://api:8080/health || echo 'unhealthy'; sleep 30; done\"\n    depends_on:\n   \
  \   api:\n        condition: service_healthy\n\n  db:\n    image: postgres:16-alpine\n    environment:\n      POSTGRES_PASSWORD: secret\n    healthcheck:\n      test: [\"CMD-SHELL\", \"pg_isready -U postgres\
  \ || exit 1\"]\n      interval: 5s\n      timeout: 3s\n      retries: 5\n      start_period: 10s\n\n  redis:\n    image: redis:7-alpine\n    healthcheck:\n      test: [\"CMD\", \"redis-cli\", \"--no-auth-warning\"\
  , \"ping\"]\n      interval: 5s\n      timeout: 3s\n      retries: 3\n\n  nginx:\n    image: nginx:alpine\n    ports:\n      - \"80:80\"\n    volumes:\n      - ./nginx.conf:/etc/nginx/nginx.conf:ro\n\
  \    healthcheck:\n      test: [\"CMD\", \"nginx\", \"-t\"]\n      interval: 30s\n      timeout: 10s\n      retries: 3\n    depends_on:\n      api:\n        condition: service_healthy\n\n  elasticsearch:\n\
  \    image: elasticsearch:8.11.0\n    environment:\n      - discovery.type=single-node\n      - xpack.security.enabled=false\n    healthcheck:\n      test: [\"CMD-SHELL\", \"curl -sf http://localhost:9200/_cluster/health\
  \ || exit 1\"]\n      interval: 30s\n      timeout: 10s\n      retries: 5\n      start_period: 60s\n"
scripts/health_check.sh: '#!/bin/bash

  curl -f http://localhost:8080/health

  '
tests/test_health.py: "def test_health_endpoint():\n    pass\n"
docs/monitoring.md: '# Health Check Configuration

  '
prometheus/alerts.yml: "groups:\n  - name: health\n"
grafana/dashboard.json: '{

  }

  '
