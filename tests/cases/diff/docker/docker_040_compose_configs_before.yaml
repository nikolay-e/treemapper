nginx/nginx.conf: |
  worker_processes auto;
  events {
      worker_connections 1024;
  }
  http {
      upstream api {
          server api:8080;
      }
      server {
          listen 80;
          location / {
              proxy_pass http://api;
              proxy_set_header Host $host;
              proxy_set_header X-Real-IP $remote_addr;
          }
      }
  }
nginx/ssl.conf: |
  ssl_protocols TLSv1.2 TLSv1.3;
  ssl_ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256;
  ssl_prefer_server_ciphers off;
prometheus/prometheus.yml: |
  global:
    scrape_interval: 15s
  scrape_configs:
    - job_name: 'api'
      static_configs:
        - targets: ['api:8080']
docker-compose.yml: |
  version: '3.8'
  services:
    nginx:
      image: nginx:alpine
    api:
      build: ./api
scripts/update_config.sh: |
  #!/bin/bash
  # GARBAGE_DOCKER_525_CONFIG_MARKER_001
  GARBAGE_DOCKER_525_CONFIG_VAR_002="update"
  docker-compose up -d --no-deps nginx
tests/test_configs.py: |
  # GARBAGE_DOCKER_525_TEST_MARKER_003
  GARBAGE_DOCKER_525_TEST_CFG_004 = {"path": "/etc/nginx"}
  def test_config_mounted():
      pass
docs/configuration.md: |
  # Configuration Management
  GARBAGE_DOCKER_525_CFG_DOC_005
  GARBAGE_DOCKER_525_RELOAD_006="nginx -s reload"
ansible/templates/nginx.conf.j2: |
  # GARBAGE_DOCKER_525_ANSIBLE_MARKER_007
  GARBAGE_DOCKER_525_TEMPLATE_008: jinja2
k8s/configmap.yaml: |
  # GARBAGE_DOCKER_525_K8S_MARKER_009
  GARBAGE_DOCKER_525_CM_010: nginx-config
