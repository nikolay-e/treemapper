package.json: |
  {
    "name": "api-server",
    "version": "1.0.0",
    "scripts": {
      "build": "tsc",
      "start": "node dist/index.js",
      "dev": "ts-node src/index.ts"
    },
    "dependencies": {
      "express": "^4.18.2",
      "pg": "^8.11.3"
    },
    "devDependencies": {
      "typescript": "^5.3.3",
      "@types/node": "^20.10.0",
      "@types/express": "^4.17.21"
    }
  }
src/index.ts: |
  import express from 'express';
  const app = express();
  app.get('/health', (req, res) => res.json({ status: 'ok' }));
  app.listen(3000);
tsconfig.json: |
  {
    "compilerOptions": {
      "target": "ES2022",
      "module": "commonjs",
      "outDir": "./dist",
      "strict": true
    }
  }
Dockerfile: |
  FROM node:20
  WORKDIR /app
  COPY . .
  RUN npm install
  RUN npm run build
  CMD ["node", "dist/index.js"]
scripts/deploy.sh: |
  #!/bin/bash
  # GARBAGE_DOCKER_502_DEPLOY_MARKER_001
  GARBAGE_DOCKER_502_DEPLOY_VAR_002="production"
  docker push myregistry/api:latest
tests/api.test.ts: |
  // GARBAGE_DOCKER_502_TEST_MARKER_003
  const GARBAGE_DOCKER_502_TEST_VAR_004 = "test";
  describe('API', () => {
    it('should return health', () => {});
  });
docs/architecture.md: |
  # Architecture
  GARBAGE_DOCKER_502_ARCH_MARKER_005
  GARBAGE_DOCKER_502_DESIGN_006="microservices"
migrations/001_init.sql: |
  -- GARBAGE_DOCKER_502_MIGRATION_MARKER_007
  -- GARBAGE_DOCKER_502_SQL_008
  CREATE TABLE users (id SERIAL PRIMARY KEY);
