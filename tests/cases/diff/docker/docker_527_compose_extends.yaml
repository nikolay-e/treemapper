name: docker_527_compose_extends
initial:
  common.yml: |
    version: '3.8'
    services:
      base:
        environment:
          - LOG_LEVEL=info
        logging:
          driver: json-file
          options:
            max-size: "10m"
  docker-compose.yml: |
    version: '3.8'
    services:
      api:
        build: .
  junk.md: |
    garbage_marker_12345
    unused_marker_67890
changed:
  docker-compose.yml: |
    version: '3.8'
    services:
      api:
        extends:
          file: common.yml
          service: base
        build: .
assertions:
  must_include:
  - 'extends:'
  must_not_include:
  - garbage_marker_12345
  - unused_marker_67890
options:
  commit_message: Add extends
