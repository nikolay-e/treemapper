name: scala_041_collections_ops
initial:
  Data.scala: |
    case class Data(id: Int, value: String, score: Double)
  DataProcessor.scala: |
    class DataProcessor {}
changed:
  DataProcessor.scala: |
    class DataProcessor {
      def filterByScore(items: List[Data], minScore: Double): List[Data] = {
        items.filter(_.score >= minScore)
      }

      def groupByFirstChar(items: List[Data]): Map[Char, List[Data]] = {
        items.groupBy(_.value.headOption.getOrElse('_'))
      }

      def topN(items: List[Data], n: Int): List[Data] = {
        items.sortBy(-_.score).take(n)
      }

      def averageScore(items: List[Data]): Double = {
        if (items.isEmpty) 0.0
        else items.map(_.score).sum / items.size
      }

      def flatMapValues(items: List[Data]): List[Char] = {
        items.flatMap(_.value.toList)
      }
    }
assertions:
  must_include:
  - DataProcessor
  - filter
  - groupBy
  - sortBy
  must_not_include:
  - garbage_marker_12345
  - unused_marker_67890
options:
  commit_message: Add collections operations
