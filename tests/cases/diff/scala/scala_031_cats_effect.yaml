name: scala_031_cats_effect
initial:
  Database.scala: |
    import cats.effect.IO

    object Database {
      def connect(): IO[Unit] = IO(println("Connected"))
      def disconnect(): IO[Unit] = IO(println("Disconnected"))
      def query(sql: String): IO[List[String]] = IO(List("result1", "result2"))
    }
  Program.scala: |
    object Program {}
changed:
  Program.scala: |
    import cats.effect.{IO, IOApp, ExitCode}
    import cats.syntax.all._

    object Program extends IOApp {
      def program: IO[Unit] = for {
        _ <- Database.connect()
        results <- Database.query("SELECT * FROM users")
        _ <- IO(results.foreach(println))
        _ <- Database.disconnect()
      } yield ()

      def run(args: List[String]): IO[ExitCode] = {
        program.as(ExitCode.Success)
      }
    }
assertions:
  must_include:
  - Program
  - IOApp
  - Database.connect
  must_not_include:
  - garbage_marker_12345
  - unused_marker_67890
options:
  commit_message: Add Cats Effect IO
