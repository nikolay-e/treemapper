name: cpp_257_union
initial:
  types.h: |
    #pragma once
    #include <cstdint>

    enum class ValueType { INT, FLOAT, STRING };
    // garbage_marker_12345
  variant.cpp: |
    #include <iostream>
    int main() { return 0; }
changed:
  variant.cpp: |
    #include "types.h"
    #include <string>
    #include <cstring>

    union Value {
        int32_t i;
        float f;
        char s[32];
    };

    struct Variant {
        ValueType type;
        Value value;

        int32_t asInt() const {
            if (type == ValueType::INT) return value.i;
            return 0;
        }

        float asFloat() const {
            if (type == ValueType::FLOAT) return value.f;
            return 0.0f;
        }
    };
assertions:
  must_include:
  - Variant
  - Value
  - ValueType
  must_not_include:
  - garbage_marker_12345
  - unused_marker_67890
options:
  commit_message: Add union usage
