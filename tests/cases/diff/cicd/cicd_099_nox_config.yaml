name: cicd_099_nox_config
initial:
  noxfile.py: |
    import nox

    @nox.session
    def tests(session):
        session.install("pytest")
        session.run("pytest")
  src/api.py: |
    def get_users():
        return []
changed:
  noxfile.py: |
    import nox

    @nox.session(python=["3.10", "3.11", "3.12"])
    def tests(session):
        session.install("-e", ".[dev]")
        session.run("pytest", "--cov")

    @nox.session
    def lint(session):
        session.install("ruff")
        session.run("ruff", "check", "src/")
assertions:
  must_include:
    - get_users
options:
  commit_message: add lint session
