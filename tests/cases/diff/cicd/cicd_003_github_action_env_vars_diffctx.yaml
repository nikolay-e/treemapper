must_include_files:
  - .github/workflows/deploy.yml
  - src/deploy.ts
must_include_content:
  - |
    env:
      NODE_ENV: production
      DEPLOY_TARGET: kubernetes
      AWS_REGION: us-east-1
  - |
    function getConfig(): DeployConfig {
      const env = process.env.NODE_ENV || 'development';
      return {
        environment: env,
        region: process.env.AWS_REGION || 'us-east-1',
        bucket: process.env.S3_BUCKET || `app-${env}`,
        distributionId: process.env.CLOUDFRONT_ID || '',
        deployTarget: process.env.DEPLOY_TARGET || 's3',
      };
    }
must_not_include:
  - GARBAGE_CICD_003_ROLLBACK_MARKER_A
  - GARBAGE_CICD_003_VERSION_MARKER_B
  - GARBAGE_CICD_003_HISTORY_MARKER_C
  - GARBAGE_CICD_003_SLACK_MARKER_D
  - GARBAGE_CICD_003_EMAIL_MARKER_E
  - GARBAGE_CICD_003_CHANNELS_MARKER_F
  - GarbageRollbackManager
  - GarbageNotificationService
  - garbage_rollback.ts
  - garbage_notifications.ts
