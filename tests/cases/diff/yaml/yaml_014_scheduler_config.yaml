name: yaml_014_scheduler_config
initial:
  config/scheduler.yaml: |
    scheduler:
      timezone: UTC
      jobs:
        - name: cleanup
          cron: "0 0 * * *"
  src/scheduler.py: |
    from apscheduler.schedulers.background import BackgroundScheduler

    def create_scheduler(timezone: str = "UTC"):
        return BackgroundScheduler(timezone=timezone)

    def cleanup_job():
        pass
changed:
  config/scheduler.yaml: |
    scheduler:
      timezone: America/New_York
      jobs:
        - name: cleanup
          cron: "0 2 * * *"
        - name: report
          cron: "0 8 * * 1"
assertions:
  must_include:
    - create_scheduler
options:
  commit_message: add report job
