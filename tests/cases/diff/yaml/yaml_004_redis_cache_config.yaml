name: yaml_004_redis_cache_config
initial:
  config/cache.yaml: |
    redis:
      host: localhost
      port: 6379
      db: 0
  src/cache.py: |
    import redis

    def get_redis_client():
        return redis.Redis(host="localhost", port=6379, db=0)
changed:
  config/cache.yaml: |
    redis:
      host: redis.cluster.local
      port: 6379
      db: 1
      password: secret
assertions:
  must_include:
    - get_redis_client
options:
  commit_message: update redis config
