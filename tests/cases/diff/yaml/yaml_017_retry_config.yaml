name: yaml_017_retry_config
initial:
  config/resilience.yaml: |
    retry:
      max_attempts: 3
      backoff_factor: 2
  src/retry.py: |
    import time

    def with_retry(func, max_attempts: int = 3, backoff: float = 2.0):
        def wrapper(*args, **kwargs):
            for attempt in range(max_attempts):
                try:
                    return func(*args, **kwargs)
                except Exception:
                    if attempt < max_attempts - 1:
                        time.sleep(backoff ** attempt)
                    else:
                        raise
        return wrapper
changed:
  config/resilience.yaml: |
    retry:
      max_attempts: 5
      backoff_factor: 1.5
      jitter: true
assertions:
  must_include:
    - with_retry
options:
  commit_message: increase retry attempts
