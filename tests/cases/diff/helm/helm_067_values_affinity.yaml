name: helm_067_values_affinity
initial:
  chart/values.yaml: |
    affinity: {}
  chart/templates/deployment.yaml: |
    apiVersion: apps/v1
    kind: Deployment
    spec:
      template:
        spec:
          affinity:
            {{- toYaml .Values.affinity | nindent 8 }}
changed:
  chart/values.yaml: |
    affinity:
      nodeAffinity:
        requiredDuringSchedulingIgnoredDuringExecution:
          nodeSelectorTerms:
            - matchExpressions:
                - key: kubernetes.io/arch
                  operator: In
                  values:
                    - amd64
assertions:
  must_include:
    - affinity
options:
  commit_message: add node affinity
