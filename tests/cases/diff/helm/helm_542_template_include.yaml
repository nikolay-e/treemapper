name: helm_542_template_include
initial:
  templates/_helpers.tpl: |
    {{- define "app.labels" -}}
    app.kubernetes.io/name: {{ .Chart.Name }}
    app.kubernetes.io/instance: {{ .Release.Name }}
    {{- end }}
  templates/deployment.yaml: |
    apiVersion: apps/v1
    kind: Deployment
    metadata:
      labels:
        app: myapp
  junk.md: |
    garbage_marker_12345
    unused_marker_67890
changed:
  templates/deployment.yaml: |
    apiVersion: apps/v1
    kind: Deployment
    metadata:
      labels:
    {{ include "app.labels" . | indent 4 }}
assertions:
  must_include:
  - include
  - app.labels
  must_not_include:
  - garbage_marker_12345
  - unused_marker_67890
options:
  commit_message: Add include
