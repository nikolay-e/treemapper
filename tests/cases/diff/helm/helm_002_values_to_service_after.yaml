chart/Chart.yaml: |
  apiVersion: v2
  name: payment-svc
  version: 2.1.0
  appVersion: "3.0.0"
chart/values.yaml: |
  replicaCount: 2
  image:
    repository: payment-service
    tag: "3.0.0"
  service:
    type: LoadBalancer
    port: 443
    annotations:
      service.beta.kubernetes.io/aws-load-balancer-type: nlb
  ingress:
    enabled: false
chart/templates/_helpers.tpl: |
  {{- define "payment-svc.fullname" -}}
  {{- printf "%s-%s" .Release.Name .Chart.Name | trunc 63 | trimSuffix "-" }}
  {{- end }}

  {{- define "payment-svc.labels" -}}
  app.kubernetes.io/name: {{ .Chart.Name }}
  app.kubernetes.io/instance: {{ .Release.Name }}
  {{- end }}
chart/templates/service.yaml: |
  apiVersion: v1
  kind: Service
  metadata:
    name: {{ include "payment-svc.fullname" . }}
    labels:
      {{- include "payment-svc.labels" . | nindent 4 }}
  spec:
    type: {{ .Values.service.type }}
    ports:
      - port: {{ .Values.service.port }}
        targetPort: http
        protocol: TCP
        name: http
    selector:
      {{- include "payment-svc.labels" . | nindent 4 }}
chart/templates/deployment.yaml: |
  apiVersion: apps/v1
  kind: Deployment
  metadata:
    name: {{ include "payment-svc.fullname" . }}
  spec:
    replicas: {{ .Values.replicaCount }}
    selector:
      matchLabels:
        {{- include "payment-svc.labels" . | nindent 6 }}
    template:
      metadata:
        labels:
          {{- include "payment-svc.labels" . | nindent 8 }}
      spec:
        containers:
          - name: {{ .Chart.Name }}
            image: "{{ .Values.image.repository }}:{{ .Values.image.tag }}"
            ports:
              - name: http
                containerPort: 8080
chart/templates/backup-cronjob.yaml: |
  apiVersion: batch/v1
  kind: CronJob
  metadata:
    name: GARBAGE_HELM_002_BACKUP_JOB_A
  spec:
    schedule: "0 2 * * *"
    jobTemplate:
      spec:
        template:
          spec:
            containers:
              - name: GARBAGE_HELM_002_BACKUP_CONTAINER_B
                image: backup-tool:latest
                command: ["GARBAGE_HELM_002_BACKUP_CMD_C"]
            restartPolicy: OnFailure
chart/docs/api-spec.md: |
  # Payment API Specification
  GARBAGE_HELM_002_API_DOCS_D
  ## Endpoints
  POST /api/v1/payments
  GARBAGE_HELM_002_API_ENDPOINT_E
