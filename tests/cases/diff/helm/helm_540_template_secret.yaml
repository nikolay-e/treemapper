name: helm_540_template_secret
initial:
  values.yaml: |
    db:
      password: ""
  templates/secret.yaml: |
    apiVersion: v1
    kind: Secret
    metadata:
      name: db-secret
    data: {}
  junk.py: |
    garbage_marker_12345 = 1
    unused_marker_67890 = 2
changed:
  templates/secret.yaml: |
    apiVersion: v1
    kind: Secret
    metadata:
      name: {{ .Release.Name }}-db-secret
    type: Opaque
    data:
      password: {{ .Values.db.password | b64enc }}
assertions:
  must_include:
  - '{{ .Values.db.password | b64enc }}'
  must_not_include:
  - garbage_marker_12345
  - unused_marker_67890
options:
  commit_message: Add secret template
