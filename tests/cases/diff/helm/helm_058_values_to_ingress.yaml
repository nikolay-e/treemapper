name: helm_058_values_to_ingress
initial:
  chart/values.yaml: |
    ingress:
      enabled: false
  chart/templates/ingress.yaml: |
    {{- if .Values.ingress.enabled }}
    apiVersion: networking.k8s.io/v1
    kind: Ingress
    metadata:
      name: {{ .Release.Name }}
    spec:
      rules:
        - host: {{ .Values.ingress.host }}
    {{- end }}
changed:
  chart/values.yaml: |
    ingress:
      enabled: true
      host: app.example.com
      tls:
        secretName: app-tls
assertions:
  must_include:
    - Ingress
options:
  commit_message: enable ingress
