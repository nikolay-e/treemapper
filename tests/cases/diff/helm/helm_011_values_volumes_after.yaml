chart/Chart.yaml: |
  apiVersion: v2
  name: storage-app
  description: Application with persistent storage
  type: application
  version: 1.3.0
  appVersion: "1.3.0"
chart/values.yaml: |
  replicaCount: 1
  image:
    repository: storage-app
    tag: "1.3.0"
  persistence:
    enabled: true
    size: 10Gi
    storageClass: standard
  service:
    type: ClusterIP
    port: 8080
chart/templates/_helpers.tpl: |
  {{- define "storage-app.fullname" -}}
  {{- printf "%s-%s" .Release.Name .Chart.Name | trunc 63 | trimSuffix "-" }}
  {{- end }}

  {{- define "storage-app.labels" -}}
  app.kubernetes.io/name: {{ .Chart.Name }}
  app.kubernetes.io/instance: {{ .Release.Name }}
  {{- end }}
chart/templates/deployment.yaml: |
  apiVersion: apps/v1
  kind: Deployment
  metadata:
    name: {{ include "storage-app.fullname" . }}
    labels:
      {{- include "storage-app.labels" . | nindent 4 }}
  spec:
    replicas: {{ .Values.replicaCount }}
    selector:
      matchLabels:
        {{- include "storage-app.labels" . | nindent 6 }}
    template:
      spec:
        containers:
          - name: {{ .Chart.Name }}
            image: "{{ .Values.image.repository }}:{{ .Values.image.tag }}"
            ports:
              - containerPort: 8080
        {{- if .Values.persistence.enabled }}
        volumes:
          - name: data
            persistentVolumeClaim:
              claimName: {{ .Release.Name }}-data
        {{- end }}
chart/templates/jaeger-agent.yaml: |
  apiVersion: apps/v1
  kind: DaemonSet
  metadata:
    name: GARBAGE_HELM_011_JAEGER_AGENT_A
  spec:
    selector:
      matchLabels:
        app: GARBAGE_HELM_011_JAEGER_LABEL_B
    template:
      spec:
        containers:
          - name: GARBAGE_HELM_011_JAEGER_CONTAINER_C
chart/docs/storage-guide.md: |
  # Storage Guide
  GARBAGE_HELM_011_STORAGE_GUIDE_D
  ## Backup Procedures
  GARBAGE_HELM_011_BACKUP_PROCEDURE_E
