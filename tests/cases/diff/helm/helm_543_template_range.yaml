name: helm_543_template_range
initial:
  values.yaml: |
    ingress:
      hosts:
        - host: app.example.com
          paths:
            - path: /
              pathType: Prefix
  templates/ingress.yaml: |
    apiVersion: networking.k8s.io/v1
    kind: Ingress
    spec:
      rules: []
  unrelated.py: |
    garbage_marker_12345 = True
    unused_marker_67890 = False
changed:
  templates/ingress.yaml: |
    apiVersion: networking.k8s.io/v1
    kind: Ingress
    spec:
      rules:
        {{- range .Values.ingress.hosts }}
        - host: {{ .host }}
          http:
            paths:
              {{- range .paths }}
              - path: {{ .path }}
                pathType: {{ .pathType }}
                backend:
                  service:
                    name: {{ $.Release.Name }}
                    port:
                      number: 80
              {{- end }}
        {{- end }}
assertions:
  must_include:
  - range .Values.ingress.hosts
  must_not_include:
  - garbage_marker_12345
  - unused_marker_67890
options:
  commit_message: Add range
