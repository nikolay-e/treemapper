name: helm_056_values_to_deployment
initial:
  chart/values.yaml: |
    replicaCount: 1
    image:
      repository: nginx
      tag: latest
  chart/templates/deployment.yaml: |
    apiVersion: apps/v1
    kind: Deployment
    metadata:
      name: {{ .Release.Name }}
    spec:
      replicas: {{ .Values.replicaCount }}
      template:
        spec:
          containers:
            - name: app
              image: "{{ .Values.image.repository }}:{{ .Values.image.tag }}"
changed:
  chart/values.yaml: |
    replicaCount: 3
    image:
      repository: nginx
      tag: "1.25"
      pullPolicy: Always
assertions:
  must_include:
    - Deployment
options:
  commit_message: scale up
