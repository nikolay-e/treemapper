name: internals_063_similar_names_unrelated
initial:
  src/shopping/cart_manager.py: |
    def add_item_to_cart(cart_id: int, item_id: int) -> dict:
        return {"cart_id": cart_id, "item_id": item_id}

    def remove_item_from_cart(cart_id: int, item_id: int) -> bool:
        return True

  external/weather/forecast_api.py: |
    WEATHER_API_MARKER_XYZ111 = "weather"

    def fetch_temperature(city_name: str) -> float:
        FETCH_TEMP_MARKER_ABC222 = True
        return 20.5

    def fetch_humidity(city_name: str) -> int:
        FETCH_HUMID_MARKER_DEF333 = True
        return 65

    class WeatherDataParser:
        PARSER_MARKER_GHI444 = "parser"

        def parse_response(self, data: dict) -> dict:
            return data

  external/stocks/market_tracker.py: |
    STOCKS_TRACKER_MARKER_JKL555 = "stocks"

    def get_stock_price(symbol: str) -> float:
        STOCK_PRICE_MARKER_MNO666 = True
        return 150.0

    def get_market_cap(symbol: str) -> int:
        MARKET_CAP_MARKER_PQR777 = True
        return 1000000

    class StockAnalyzer:
        ANALYZER_MARKER_STU888 = "analyzer"

        def analyze(self, symbol: str) -> dict:
            return {"symbol": symbol}

  tools/logging/audit_recorder.py: |
    AUDIT_RECORDER_MARKER_VWX999 = "audit"

    def record_action(action_type: str) -> str:
        RECORD_ACTION_MARKER_YZA000 = True
        return f"recorded_{action_type}"

    def retrieve_log(log_id: int) -> dict:
        RETRIEVE_LOG_MARKER_BCD111 = True
        return {"log_id": log_id}

changed:
  src/shopping/cart_manager.py: |
    def add_item_to_cart(cart_id: int, item_id: int) -> dict:
        if cart_id <= 0 or item_id <= 0:
            raise ValueError("Invalid cart or item id")
        return {"cart_id": cart_id, "item_id": item_id, "added": True}

    def remove_item_from_cart(cart_id: int, item_id: int) -> bool:
        if cart_id <= 0 or item_id <= 0:
            raise ValueError("Invalid cart or item id")
        return True

    def get_cart_total(cart_id: int) -> float:
        return 0.0

assertions:
  must_include:
    - add_item_to_cart
    - remove_item_from_cart
    - cart_id

  must_not_include:
    - WEATHER_API_MARKER_XYZ111
    - FETCH_TEMP_MARKER_ABC222
    - FETCH_HUMID_MARKER_DEF333
    - PARSER_MARKER_GHI444
    - STOCKS_TRACKER_MARKER_JKL555
    - STOCK_PRICE_MARKER_MNO666
    - MARKET_CAP_MARKER_PQR777
    - ANALYZER_MARKER_STU888
    - AUDIT_RECORDER_MARKER_VWX999
    - RECORD_ACTION_MARKER_YZA000
    - RETRIEVE_LOG_MARKER_BCD111
    - fetch_temperature
    - fetch_humidity
    - WeatherDataParser
    - get_stock_price
    - get_market_cap
    - StockAnalyzer
    - record_action
    - retrieve_log

options:
  commit_message: "Add validation to cart manager"
  add_garbage: false
  skip_garbage_check: true
