src/api.ts: |
  export interface UserResponse {
      id: string;
      name: string;
      email: string;
      role: string;
  }

  export async function fetchUser(id: string): Promise<UserResponse> {
      const response = await fetch(`/api/users/${id}`);
      if (!response.ok) {
          throw new Error(`User not found: ${id}`);
      }
      return response.json();
  }

  export async function fetchUsers(): Promise<UserResponse[]> {
      const response = await fetch('/api/users');
      return response.json();
  }
src/service.ts: |
  import { fetchUser } from './api';

  export async function getUserDisplayName(id: string): Promise<string> {
      const user = await fetchUser(id);
      return `${user.name} (${user.role})`;
  }

  export async function getUserEmail(id: string): Promise<string> {
      const user = await fetchUser(id);
      return user.email;
  }
src/service.test.ts: |
  console.log('initial');
src/unrelated/storage.ts: |
  const GARBAGE_JSX_004_STORAGE_ADAPTER_A = 'storage_garbage_marker';

  export class GarbageStorageAdapter {
      private data: Record<string, string> = {};

      save(key: string, value: string): void {
          this.data[key] = value;
      }

      load(key: string): string | undefined {
          return this.data[key];
      }
  }

  export function GARBAGE_JSX_004_SYNC_STORAGE_B(): void {
      console.log('GARBAGE_JSX_004_SYNC_OUTPUT_C');
  }
src/unrelated/notifications.ts: |
  const GARBAGE_JSX_004_NOTIFICATION_HUB_D = { provider: 'email', enabled: true };

  export class GARBAGE_JSX_004_NOTIFIER_E {
      send(message: string): void {
          console.log(message);
      }
  }

  export function GARBAGE_JSX_004_DISPATCH_NOTIFICATION_F(): void {
      console.log('dispatching notification');
  }
