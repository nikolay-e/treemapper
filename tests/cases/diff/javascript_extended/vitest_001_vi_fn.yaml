name: vitest_001_vi_fn
initial:
  callback.ts: |
    export type Callback = (value: number) => void;

    export function processNumbers(numbers: number[], callback: Callback) {
        numbers.forEach(n => callback(n));
    }

    // vitest_garbage_marker_001
    const garbageCallback = () => {};
  callback.test.ts: |
    console.log('initial');
changed:
  callback.test.ts: |
    import { describe, it, expect, vi } from 'vitest';
    import { processNumbers } from './callback';

    describe('processNumbers', () => {
        it('should call callback for each number', () => {
            const callback = vi.fn();
            processNumbers([1, 2, 3], callback);
            expect(callback).toHaveBeenCalledTimes(3);
            expect(callback).toHaveBeenCalledWith(1);
            expect(callback).toHaveBeenCalledWith(2);
            expect(callback).toHaveBeenCalledWith(3);
        });
    });
assertions:
  must_include:
  - callback.test.ts
  must_not_include:
  - vitest_garbage_marker_001
options:
  commit_message: Add vitest tests
