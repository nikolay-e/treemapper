name: ts_ext_002_union_type
initial:
  result.ts: |
    export type Success<T> = { success: true; data: T };
    export type Failure = { success: false; error: string };

    // ts_ext_garbage_marker_002
    type GarbageResult = { garbage: true };
  handler.ts: |
    console.log('initial');
changed:
  handler.ts: |
    import { Success, Failure } from './result';

    type Result<T> = Success<T> | Failure;

    function handleResult<T>(result: Result<T>) {
        if (result.success) {
            return result.data;
        }
        throw new Error(result.error);
    }
assertions:
  must_include:
  - handler.ts
  must_not_include:
  - ts_ext_garbage_marker_002
options:
  commit_message: Add union type
