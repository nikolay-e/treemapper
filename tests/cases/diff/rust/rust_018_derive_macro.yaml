name: rust_018_derive_macro
initial:
  src/models.rs: |
    #[derive(Debug, Clone)]
    pub struct User {
        pub id: u64,
        pub name: String,
    }

    impl User {
        pub fn new(id: u64, name: String) -> Self {
            Self { id, name }
        }
    }
changed:
  src/models.rs: |
    #[derive(Debug, Clone, PartialEq, Eq, Hash)]
    pub struct User {
        pub id: u64,
        pub name: String,
        pub email: String,
    }

    impl User {
        pub fn new(id: u64, name: String, email: String) -> Self {
            Self { id, name, email }
        }
    }
assertions:
  must_include:
  - User
  - email
  - PartialEq
  must_not_include:
  - garbage_field_name
options:
  commit_message: Add email field and more derives
