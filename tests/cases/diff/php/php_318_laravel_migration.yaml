name: php_318_laravel_migration
initial:
  Blueprint.php: |
    <?php
    class Blueprint {
        private array $columns = [];

        public function id(): self {
            $this->columns[] = ['name' => 'id', 'type' => 'bigint'];
            return $this;
        }

        public function string(string $name, int $length = 255): self {
            $this->columns[] = ['name' => $name, 'type' => 'string', 'length' => $length];
            return $this;
        }

        public function unique(): self {
            return $this;
        }

        public function timestamps(): self {
            $this->columns[] = ['name' => 'created_at', 'type' => 'timestamp'];
            $this->columns[] = ['name' => 'updated_at', 'type' => 'timestamp'];
            return $this;
        }
    }
  CreateUsersTable.php: |
    <?php
    class CreateUsersTable {}
changed:
  CreateUsersTable.php: |
    <?php
    require_once 'Blueprint.php';

    class CreateUsersTable {
        public function up(): void {
            $table = new Blueprint();
            $table->id();
            $table->string('name');
            $table->string('email')->unique();
            $table->string('password');
            $table->timestamps();
        }
    }
assertions:
  must_include:
  - new Blueprint
  - id()
  - string(
  - timestamps
  must_not_include:
  - garbage_marker_12345
  - unused_marker_67890
options:
  commit_message: Add Laravel migration
