name: php_307_magic_method
initial:
  DynamicObject.php: |
    <?php
    class DynamicObject {
        private array $data = [];

        public function __get(string $name): mixed {
            return $this->data[$name] ?? null;
        }

        public function __set(string $name, mixed $value): void {
            $this->data[$name] = $value;
        }

        public function __isset(string $name): bool {
            return isset($this->data[$name]);
        }
    }
  app.php: |
    <?php
    echo "Hello";
changed:
  app.php: |
    <?php
    require_once 'DynamicObject.php';

    $obj = new DynamicObject();
    $obj->name = 'John';
    $obj->email = 'john@example.com';

    echo $obj->name;
    if (isset($obj->email)) {
        echo $obj->email;
    }
assertions:
  must_include:
  - new DynamicObject
  - $obj->name
  must_not_include:
  - garbage_marker_12345
  - unused_marker_67890
options:
  commit_message: Add magic method usage
