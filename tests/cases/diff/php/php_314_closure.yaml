name: php_314_closure
initial:
  Multiplier.php: |
    <?php
    class Multiplier {
        public function __construct(private int $factor) {}

        public function getFactor(): int {
            return $this->factor;
        }
    }
  app.php: |
    <?php
    echo "Hello";
changed:
  app.php: |
    <?php
    require_once 'Multiplier.php';

    $multiplier = new Multiplier(10);
    $factor = $multiplier->getFactor();

    $callback = function(int $x) use ($factor): int {
        return $x * $factor;
    };

    $numbers = [1, 2, 3, 4, 5];
    $result = array_map($callback, $numbers);
    print_r($result);
assertions:
  must_include:
  - new Multiplier
  - getFactor
  must_not_include:
  - garbage_marker_12345
  - unused_marker_67890
options:
  commit_message: Add closure
