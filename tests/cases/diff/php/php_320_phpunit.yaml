name: php_320_phpunit
initial:
  User.php: |
    <?php
    class User {
        public function __construct(
            public string $name,
            public string $email
        ) {}

        public function isValidEmail(): bool {
            return filter_var($this->email, FILTER_VALIDATE_EMAIL) !== false;
        }
    }
  UserTest.php: |
    <?php
    class UserTest {}
changed:
  UserTest.php: |
    <?php
    require_once 'User.php';

    class UserTest {
        public function testUserCreation(): void {
            $user = new User('John', 'john@example.com');

            assert($user->name === 'John');
            assert($user->email === 'john@example.com');
        }

        public function testEmailValidation(): void {
            $validUser = new User('John', 'john@example.com');
            $invalidUser = new User('Jane', 'invalid-email');

            assert($validUser->isValidEmail() === true);
            assert($invalidUser->isValidEmail() === false);
        }
    }
assertions:
  must_include:
  - new User
  - isValidEmail
  must_not_include:
  - garbage_marker_12345
  - unused_marker_67890
options:
  commit_message: Add PHPUnit test
