name: swift_334_observed_object
initial:
  UserViewModel.swift: |
    import Combine

    class UserViewModel: ObservableObject {
        @Published var name = ""
        @Published var email = ""
        @Published var isValid = false

        func validate() {
            isValid = !name.isEmpty && email.contains("@")
        }
    }
    // unused_marker_67890
  UserFormView.swift: |
    // Initial
    import SwiftUI
    struct UserFormView: View {
        var body: some View { Text("") }
    }
changed:
  UserFormView.swift: |
    import SwiftUI

    struct UserFormView: View {
        @ObservedObject var viewModel: UserViewModel

        var body: some View {
            Form {
                TextField("Name", text: $viewModel.name)
                TextField("Email", text: $viewModel.email)
                Button("Submit") {
                    viewModel.validate()
                }
                .disabled(!viewModel.isValid)
            }
            .onChange(of: viewModel.name) { _ in viewModel.validate() }
            .onChange(of: viewModel.email) { _ in viewModel.validate() }
        }
    }
assertions:
  must_include:
  - UserFormView
  - UserViewModel
  - ObservedObject
  must_not_include:
  - garbage_marker_12345
  - unused_marker_67890
options:
  commit_message: Add @ObservedObject
