name: swift_336_coredata_entity
initial:
  User+CoreDataProperties.swift: |
    import Foundation
    import CoreData

    extension User {
        @nonobjc public class func fetchRequest() -> NSFetchRequest<User> {
            return NSFetchRequest<User>(entityName: "User")
        }

        @NSManaged public var id: UUID?
        @NSManaged public var name: String?
        @NSManaged public var email: String?
        @NSManaged public var createdAt: Date?
    }
    // unused_marker_67890
  UserManager.swift: |
    // Initial
    class UserManager {}
changed:
  UserManager.swift: |
    import CoreData

    class UserManager {
        let context: NSManagedObjectContext

        init(context: NSManagedObjectContext) {
            self.context = context
        }

        func createUser(name: String, email: String) -> User {
            let user = User(context: context)
            user.id = UUID()
            user.name = name
            user.email = email
            user.createdAt = Date()
            return user
        }

        func fetchUsers() throws -> [User] {
            let request = User.fetchRequest()
            return try context.fetch(request)
        }
    }
assertions:
  must_include:
  - UserManager
  - User
  - createUser
  - fetchRequest
  must_not_include:
  - garbage_marker_12345
  - unused_marker_67890
options:
  commit_message: Add CoreData entity usage
