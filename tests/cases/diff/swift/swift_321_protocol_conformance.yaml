name: swift_321_protocol_conformance
initial:
  User.swift: |
    struct User: Codable, Equatable {
        let id: String
        let name: String
        let email: String
    }
    // garbage_marker_12345 - this should not appear in context
  UserService.swift: |
    // Initial
    class UserService {}
changed:
  UserService.swift: |
    import Foundation

    class UserService {
        func encode(user: User) throws -> Data {
            let encoder = JSONEncoder()
            return try encoder.encode(user)
        }

        func decode(data: Data) throws -> User {
            let decoder = JSONDecoder()
            return try decoder.decode(User.self, from: data)
        }
    }
assertions:
  must_include:
  - UserService
  - User
  - encode
  must_not_include:
  - garbage_marker_12345
  - unused_marker_67890
options:
  commit_message: Add protocol conformance usage
