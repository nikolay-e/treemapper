worker.py: |
  import boto3
  sqs = boto3.client('sqs')
  messages = sqs.receive_message(QueueUrl=queue_url)
messaging.tf: |
  resource "aws_sqs_queue" "tasks" {
    name                      = "tasks-queue"
    delay_seconds             = 0
    max_message_size          = 262144
    message_retention_seconds = 345600
    visibility_timeout_seconds = 30

    redrive_policy = jsonencode({
      deadLetterTargetArn = aws_sqs_queue.tasks_dlq.arn
      maxReceiveCount     = 3
    })
  }

  resource "aws_sqs_queue" "tasks_dlq" {
    name = "tasks-queue-dlq"
  }
