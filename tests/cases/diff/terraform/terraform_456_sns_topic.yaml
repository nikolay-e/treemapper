name: terraform_456_sns_topic
initial:
  monitoring.tf: |
    # SNS resources
changed:
  monitoring.tf: |
    resource "aws_sns_topic" "alerts" {
      name = "alerts-topic"
    }

    resource "aws_sns_topic_subscription" "email" {
      topic_arn = aws_sns_topic.alerts.arn
      protocol  = "email"
      endpoint  = var.alert_email
    }
assertions:
  must_include:
  - monitoring.tf
options:
  commit_message: Add SNS topic
