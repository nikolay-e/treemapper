name: terraform_478_lifecycle
initial:
  main.tf: |
    resource "aws_instance" "web" {
      ami           = var.ami_id
      instance_type = "t3.micro"
    }
changed:
  main.tf: |
    resource "aws_instance" "web" {
      ami           = var.ami_id
      instance_type = "t3.micro"

      lifecycle {
        create_before_destroy = true
        prevent_destroy       = true
        ignore_changes        = [tags]
      }
    }
assertions:
  must_include:
  - main.tf
options:
  commit_message: Add lifecycle
