name: tf_041_data_source
initial:
  data.tf: |
    data "aws_ami" "amazon_linux" {
      most_recent = true
      owners      = ["amazon"]
    }
  main.tf: |
    resource "aws_instance" "web" {
      ami           = data.aws_ami.amazon_linux.id
      instance_type = "t3.micro"
    }
changed:
  data.tf: |
    data "aws_ami" "amazon_linux" {
      most_recent = true
      owners      = ["amazon"]
      filter {
        name   = "name"
        values = ["amzn2-ami-hvm-*"]
      }
    }
assertions:
  must_include:
    - aws_instance
options:
  commit_message: add ami filter
