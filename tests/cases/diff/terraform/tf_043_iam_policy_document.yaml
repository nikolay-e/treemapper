name: tf_043_iam_policy_document
initial:
  iam.tf: |
    data "aws_iam_policy_document" "lambda_assume" {
      statement {
        actions = ["sts:AssumeRole"]
        principals {
          type        = "Service"
          identifiers = ["lambda.amazonaws.com"]
        }
      }
    }
  main.tf: |
    resource "aws_iam_role" "lambda" {
      name               = "lambda-role"
      assume_role_policy = data.aws_iam_policy_document.lambda_assume.json
    }
changed:
  iam.tf: |
    data "aws_iam_policy_document" "lambda_assume" {
      statement {
        actions = ["sts:AssumeRole"]
        principals {
          type        = "Service"
          identifiers = ["lambda.amazonaws.com", "edgelambda.amazonaws.com"]
        }
      }
    }
assertions:
  must_include:
    - aws_iam_role
options:
  commit_message: add edge lambda
