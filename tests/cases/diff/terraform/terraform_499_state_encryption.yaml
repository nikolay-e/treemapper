name: terraform_499_state_encryption
initial:
  backend.tf: |
    terraform {
      backend "s3" {
        bucket = "my-terraform-state"
        key    = "terraform.tfstate"
        region = "us-east-1"
      }
    }
changed:
  backend.tf: |
    terraform {
      backend "s3" {
        bucket         = "my-terraform-state"
        key            = "terraform.tfstate"
        region         = "us-east-1"
        encrypt        = true
        kms_key_id     = "arn:aws:kms:us-east-1:123456789:key/abc123"
        dynamodb_table = "terraform-state-lock"
      }
    }
assertions:
  must_include:
  - backend.tf
options:
  commit_message: Add state encryption
