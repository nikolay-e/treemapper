name: terraform_473_locals
initial:
  main.tf: |
    resource "aws_instance" "web" {
      tags = {
        Name = "web-server"
        Environment = "prod"
      }
    }
changed:
  main.tf: |
    locals {
      common_tags = {
        Project     = "myapp"
        Environment = var.environment
        ManagedBy   = "terraform"
      }
    }

    resource "aws_instance" "web" {
      tags = merge(local.common_tags, {
        Name = "web-server"
      })
    }
assertions:
  must_include:
  - main.tf
options:
  commit_message: Add locals
