name: terraform_490_lifecycle_prevent_destroy
initial:
  database.tf: |
    resource "aws_db_instance" "main" {
      identifier     = "production-db"
      engine         = "postgres"
      instance_class = "db.r5.large"
    }
changed:
  database.tf: |
    resource "aws_db_instance" "main" {
      identifier     = "production-db"
      engine         = "postgres"
      instance_class = "db.r5.large"

      lifecycle {
        prevent_destroy = true
      }
    }
assertions:
  must_include:
  - database.tf
options:
  commit_message: Add prevent_destroy
