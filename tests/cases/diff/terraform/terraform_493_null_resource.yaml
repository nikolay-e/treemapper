name: terraform_493_null_resource
initial:
  scripts/deploy.sh: |
    #!/bin/bash
    echo "Deploying application..."
  main.tf: |
    # Main resources
changed:
  main.tf: |
    resource "null_resource" "deploy" {
      triggers = {
        build_version = var.build_version
        config_hash   = md5(file("config.json"))
      }

      provisioner "local-exec" {
        command = "./scripts/deploy.sh ${var.environment}"
      }

      depends_on = [aws_instance.web]
    }
assertions:
  must_include:
  - main.tf
options:
  commit_message: Add null_resource for deployment
