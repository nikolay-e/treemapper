name: ruby_294_metaprogramming
initial:
  dsl.rb: |
    module DSL
      def self.define_accessors(*names)
        names.each do |name|
          define_method(name) do
            instance_variable_get("@\#{name}")
          end

          define_method("\#{name}=") do |value|
            instance_variable_set("@\#{name}", value)
          end
        end
      end
    end
  config.rb: |
    # Initial
    class Config
    end
changed:
  config.rb: |
    require_relative 'dsl'

    class Config
      extend DSL

      define_accessors :host, :port, :debug

      def initialize(host: 'localhost', port: 3000, debug: false)
        @host = host
        @port = port
        @debug = debug
      end
    end

    config = Config.new
    puts config.host
    config.debug = true
assertions:
  must_include:
  - extend DSL
  - define_accessors
  must_not_include:
  - garbage_marker_12345
  - unused_marker_67890
options:
  commit_message: Add metaprogramming usage
