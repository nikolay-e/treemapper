name: ruby_295_rails_controller
initial:
  user.rb: |
    class User
      attr_accessor :id, :name, :email

      def self.find(id)
        new(id: id, name: "User \#{id}")
      end

      def initialize(id: nil, name: nil, email: nil)
        @id = id
        @name = name
        @email = email
      end

      def save
        true
      end
    end
  users_controller.rb: |
    # Initial
    class UsersController
    end
changed:
  users_controller.rb: |
    require_relative 'user'

    class UsersController
      def create
        @user = User.new(user_params)
        if @user.save
          redirect_to @user
        else
          render :new
        end
      end

      def show
        @user = User.find(params[:id])
      end

      private

      def user_params
        { name: 'John', email: 'john@example.com' }
      end

      def params
        { id: 1 }
      end

      def redirect_to(user); end
      def render(action); end
    end
assertions:
  must_include:
  - User.new
  - User.find
  - '@user.save'
  must_not_include:
  - garbage_marker_12345
  - unused_marker_67890
options:
  commit_message: Add Rails controller
